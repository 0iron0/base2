<!DOCTYPE html PUBLIC "-//WHATWG//NONSGML HTML5//EN">
<!--

	This implements a simple color picker using Web Forms 2.

-->
<html>
<head>
<title>WF2 Color Picker Demo</title>
<meta name="author" content="Erik Arvidsson">
<!-- keeping code tidier!! -->
<meta name="copyright" content="&copy; copyright 2005, Erik Arvidsson">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- html5 support -->
<!--[if gte IE 6]><script type="text/javascript" src="../wf2.js"></script><![endif]-->
<style type="text/css">

body, html {
	overflow:	hidden;
	margin:		0;
	border:		0;
	padding:	0;
	width:		100%;
	height:		100%;
	background:	ThreeDFace;
	font:		MessageBox;
	font:		Message-Box;
}

.color-picker {
	background:	transparent;
	width:		100%;
	height:		100%;
}

.color-picker td {
	padding:	1px;
}

.slider {
	/*height:		20px;*/
	margin:		0;
}

.color-picker .text-input {
	text-align:	right;
	width:		50px;
}
.color-picker td,
.color-picker input {
	font:	Message-Box;
	font:	MessageBox;
}

#color-result {
	width:				60px;
	border:				1px solid ThreeDDarkShadow;
	background-color:	black;
}

</style>
</head>
<body>

<table class="color-picker" cellspacing="2" cellpadding="0" border="0">
<col style="width: 40px">
<col>
<col style="width: 10px">
<col style="width: 50px">
<tr>
	<td><label for="red-slider">Red:</label></td>
	<td><input type="range" class="slider" id="red-slider" tabIndex="1" min="0" max="255" value="128"></td>
	<td><input type="number" class="text-input" id="red-input" maxlength="3" tabIndex="2" min="0" max="255" value="128"></td>
	<td rowspan="3" id="color-result">&nbsp;</td>
</tr>
<tr>
	<td><label for="green-slider">Green:</label></td>
	<td><input type="range" class="slider" id="green-slider" tabIndex="3" min="0" max="255" value="128"></td>
	<td><input type="number" class="text-input" id="green-input" maxlength="3" tabIndex="4" min="0" max="255" value="128"></td>
</tr>
<tr>
	<td><label for="blue-slider">Blue:</label></td>
	<td><input type="range" class="slider" id="blue-slider" tabIndex="5" min="0" max="255" value="128"></td>
	<td><input type="number" class="text-input" id="blue-input" maxlength="3" tabIndex="6" min="0" max="255" value="128"></td>
</tr>
</table>

<script type="text/javascript">

var r = document.getElementById("red-slider");
var g = document.getElementById("green-slider");
var b = document.getElementById("blue-slider");

var ri = document.getElementById("red-input");
var bi = document.getElementById("blue-input");
var gi = document.getElementById("green-input");

// oninput happens as the user types in the number inputs
ri.oninput = function () {
	if (this.validity.valid && this.value != "") {
		r.value = this.value;
	}
};

gi.oninput = function () {
	if (this.validity.valid && this.value != "") {
		g.value = this.value;
	}
};

bi.oninput = function () {
	if (this.validity.valid && this.value != "") {
		b.value = this.value;
	}
};

function update () {
	// this extra test is for non WF2 browsers since a user might enter a non-
	// numeric value
	var rv = Number(r.value);
	var gv = Number(g.value);
	var bv = Number(b.value);
	if (!isNaN(rv) && !isNaN(gv) && !isNaN(bv)) {
		var cr = document.getElementById("color-result");
		cr.style.backgroundColor = "rgb(" + rv + "," + gv + "," + bv + ")";

		// sync the number inputs
		ri.value = rv;
		gi.value = gv;
		bi.value = bv;
	}
}

// any time the value changes
r.onDOMControlValueChanged =
g.onDOMControlValueChanged =
b.onDOMControlValueChanged =
// fall back on change event for non WF2 browsers
r.onchange =
g.onchange =
b.onchange = update;

// init in case of reload
update();

// work around for fixed size bug/issue in wf2-ie
function fixSize() {
	if (document.documentElement) {
		var w = Math.max(50, document.documentElement.clientWidth - 190) + "px";
		(r.runtimeStyle || r.style).width = w;
		(g.runtimeStyle || g.style).width = w;
		(b.runtimeStyle || b.style).width = w;
	}
}
window.onresize = fixSize;
fixSize();

</script>
</body>
</html>
