new function(_){var JSB=new base2.Namespace(this,{name:"JSB",version:"0.7",imports:"DOM",exports:"Behavior, Rule, RuleList"});eval(this.imports);var Behavior=Abstract.extend();var Call=Base.extend({constructor:function(a,b,c,d){this.release=function(){b.apply(a,c)};this.rank=d||(100+Call.list.length)}},{list:[],defer:function(a,b){return function(){if(Call.list){Call.list.push(new Call(this,a,arguments,b))}else{a.apply(this,arguments)}}},init:function(){EventTarget.addEventListener(document,"DOMContentLoaded",function(){if(Call.list){DOM.bind(document);Call.list.sort(function(a,b){return a.rank-b.rank});invoke(Call.list,"release");delete Call.list;setTimeout(function(){var a=DocumentEvent.createEvent(document,"Events");Event.initEvent(a,"ready",false,false);EventTarget.dispatchEvent(document,a)},1)}},false)}});var _0=/^on[a-z]+$/;var Rule=Base.extend({constructor:function(e,f){e=new Selector(e);if(Behavior.ancestorOf(f)){f=f.prototype}var g={},h={},i=f.style,j={};forEach(f,function(a,b){if(b.charAt(0)=="@"){if(detect(b.slice(1))){forEach(a,arguments.callee)}}else if(typeof a=="function"&&_0.test(b)){h[b.slice(2)]=a}else if(b!="style"){g[b]=a}});function addBehavior(a){var b=assignID(a);if(!j[b]){j[b]=true;DOM.bind(a);extend(a,g);extend(a.style,i);for(var c in h){var target=a;var d=h[c];if(c.indexOf("document")==0){target=document;c=c.slice(8);d=bind(d,a)}target.addEventListener(c,d,false)}}};this.refresh=Call.defer(function(){e.exec(document).forEach(addBehavior)});this.toString=K(String(e));this.refresh()},refresh:Undefined});var RuleList=Collection.extend({constructor:function(a){this.base(a);this.globalize()},globalize:Call.defer(function(){var e=/[^\s,]+/g;var f=/^#[\w-]+$/;forEach(this,function(c,d){forEach(match(d,e),function(a){if(f.test(a)){var b=ViewCSS.toCamelCase(a.slice(1));window[b]=Document.querySelector(document,a)}})})},10),refresh:function(){this.invoke("refresh")}},{Item:Rule});eval(this.exports)};