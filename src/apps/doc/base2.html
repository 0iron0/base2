<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<head>
<title>MiniWeb: /doc/!base2</title>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/lib/src/base2.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/lib/src/base2-dom.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/lib/src/base2-io.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/lib/src/base2-jsb.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/lib/src/base2-json.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/lib/src/base2-jst.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/src/apps/colorizer/Colorizer.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/src/apps/colorizer/schemes/javascript.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/src/apps/colorizer/schemes/base2.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/src/apps/MiniWeb/engine.js"></script>
<script type="text/javascript" src="http://base2.googlecode.com/svn/trunk/src/apps/doc/engine.js"></script>
<script type="text/javascript">
MiniWeb.$$.system={"Administration":"<p>You are invited to customise MiniWeb:<\/p>\n<ul>\n <li>Test a <a href='#/dud'>dud<\/a> link<\/li>\n <li>Edit the default <a href='#/system/edit!/system/view'>view<\/a> (page structure)<\/li>\n <ul>\n  <li>Edit the <a href='#/system/edit!/system/header'>header<\/a> template<\/li>\n  <li>Edit the <a href='#/system/edit!/system/content'>content<\/a> template<\/li>\n  <li>Edit the <a href='#/system/edit!/system/footer'>footer<\/a> template<\/li>\n  <li>Edit the <a href='#/system/edit!/system/directory'>directory<\/a> template<\/li>\n  <li>Edit the <a href='#/system/view!/system/Error/'>error<\/a> page templates<\/li>\n  <li>Edit page <a href='#/system/edit!/system/view.css'>style<\/a><\/li>\n <\/ul><\/li>\n <li>Edit <a href='javascript:beginEdit()'>this<\/a> page<\/li>\n<\/ul>\n<p>Or have a look around:<\/p>\n<ul>\n <li>Go to the <a href='#/'>root<\/a> of the MiniWeb file system<\/li>\n <li>Go to the <a href='#/system'>system<\/a> directory<\/li>\n <li>Go to the <a href='#/examples/'>examples<\/a><\/li>\n<\/ul>\n<p>If you are feeling adventurous you can use the <a href='#/system/Terminal'>terminal<\/a> to modify the file system.<\/p>","Help":{"JST_Interpreter":"<p>The standard interpreter is based on <a href='http://erik.eae.net/'>Erik Arvidsson<\/a>&#8217;s <a href='http://erik.eae.net/archives/2005/05/27/01.03.26/'>ECMAScript Template Engine<\/a>. The <abbr title='JavaScript Templates'>JST<\/abbr> interpreter uses a command object to provide access to additional commands. The <abbr>JST<\/abbr> interpreter extends the <a href=\"#File_System\">FileSystem<\/a> object which provides methods for reading and writing files and directories.<\/p>\n<p>The extended MiniWeb command object supports the following properties and methods:<\/p>\n<h2>Properties<\/h2>\n<dl>\n<dt><code><small>string<\/small> parent<\/code><\/dt>\n<dd><p>The path of the parent template.<\/p><\/dd>\n<dt><code><small>object<\/small> request<\/code><\/dt>\n<dd><p>The current <a href='#Request'>Request<\/a> object (if there is one).<\/p><\/dd>\n<dt><code><small>string<\/small> self<\/code><\/dt>\n<dd><p>The path of the current template.<\/p><\/dd>\n<dt><code><small>string<\/small> target<\/code><\/dt>\n<dd><p>The current input buffer. Can be any kind of string data. Is quite often the path to another template.<\/p><\/dd>\n<dt><code><small>string<\/small> top<\/code><\/dt>\n<dd><p>The path of the top level template.<\/p><\/dd>\n<\/dl>\n<h2>Methods<\/h2>\n<dl>\n<dt><code><small>string<\/small> args(<i>names<\/i>)<\/code><\/dt>\n<dd><p>Treats the current target as if it were a space delimited list of arguments. <i>names<\/i> is a comma delimited list of names. This function defines variables in the current scope described by <i>names<\/i>. Returns the resulting argument list.<\/p>\n<p>For example:<\/p>\n<pre>\n&lt;%\n\nvar theArguments = args('name,value');\n\n// 'name' and 'value' are now defined in the current scope\necho(name + \":\" + value);\n\n// 'theArguments' is equivalent to JavaScript's arguments object\necho('Number of arguments is ' + theArguments.length);\n\n%&gt;<\/pre><\/dd>\n<dt><code><small>void<\/small> echo(<i>string<\/i>)<\/code><\/dt>\n<dd><p>Write <i>string<\/i> directly to the output buffer.<\/p><\/dd>\n<dt><code><small>string<\/small> escapeHTML(<i>string<\/i>)<\/code><\/dt>\n<dd><p>Replace certain characters (<code>\"&amp;'&lt;&gt;<\/code>) with the equivalent HTML entity.<\/p><\/dd>\n<dt><code><small>string<\/small> exec(<i>template<\/i> [, <i>target<\/i>])<\/code><\/dt>\n<dd><p>Evaluate the entry identified by <i>template<\/i> using <i>target<\/i> as the current target. Returns the resulting string.<\/p><\/dd>\n<dt><code><small>void<\/small> include(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Evaluate the entry associated with <i>path<\/i> and write the results to the output buffer.<\/p><\/dd>\n<dt><code><small>void<\/small> include_once(<i>path<\/i>)<\/code><\/dt>\n<dd><p>As above but all further calls to <code>include_once<\/code> are ignored for the particular <i>path<\/i>.<\/p><\/dd>\n<dt><code><small>void<\/small> process(<i>template<\/i>, [<i>target<\/i> [, <i>...<\/i>]])<\/code><\/dt>\n<dd><p>Evaluate the entry associated with <i>template<\/i> using <i>target<\/i> as the current target. Do this for each entry associated with subsequent <i>target<\/i> arguments and <code>echo<\/code> the results.<\/p>\n<p>For example:<\/p>\n<pre>process(template, target1, target2);<\/pre>\n<p>is equivalent to:<\/p>\n<pre>echo(exec(template, target1);\necho(exec(template, target2);<\/pre><\/dd>\n<\/dl>\n<h2>Notes<\/h2>\n<p><em>There is no real distinction between a template and an entry.<\/em><\/p>\n","File_System":"<p>The file system object supports the following properties and methods:<\/p>\n<h2>Properties<\/h2>\n<dl>\n<dt><code><small>string<\/small> protocol<\/code><\/dt>\n<dd><p>The current protocol. Currently only <code>json:<\/code> is supported.<\/p><\/dd>\n<dt><code><small>string<\/small> path<\/code><\/dt>\n<dd><p>The current working directory.<\/p><\/dd>\n<\/dl>\n<h2>Methods<\/h2>\n<dl>\n<dt><code><small>string<\/small> chdir(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Change the current working directory to <i>path<\/i>.<\/p><\/dd>\n<dt><code><small>string<\/small> copy(<i>path1<\/i>, <i>path2<\/i>)<\/code><\/dt>\n<dd><p>Copy the file found at <i>path1<\/i> to <i>path2<\/i>.<\/p><\/dd>\n<dt><code><small>boolean<\/small> exists(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Verifies the existence of a file or directory.<\/p><\/dd>\n<dt><code><small>boolean<\/small> isDirectory(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Verifies that the file found at <i>path<\/i> is a directory.<\/p><\/dd>\n<dt><code><small>boolean<\/small> isFile(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Verifies that the file found at <i>path<\/i> is a file.<\/p><\/dd>\n<dt><code><small>boolean<\/small> mkdir(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Create the directory described by <i>path<\/i>.<\/p><\/dd>\n<dt><code><small>void<\/small> move(<i>path1<\/i>, <i>path2<\/i>)<\/code><\/dt>\n<dd><p>Move the file found at <i>path1<\/i> to <i>path2<\/i>.<\/p><\/dd>\n<dt><code><small>varied<\/small> read(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Read the file or directory found at <i>path<\/i> and return its contents. For a text file the text is returned and for a directory a collection of directory items is returned.<\/p><\/dd>\n<dt><code><small>void<\/small> remove(<i>path<\/i>)<\/code><\/dt>\n<dd><p>Delete the file or directory found at <i>path<\/i>.<\/p><\/dd>\n<dt><code><small>void<\/small> write(<i>path<\/i>, <i>text<\/i>)<\/code><\/dt>\n<dd><p>Write text to the file found at <i>path<\/i>.<\/p><\/dd>\n<\/dl>\n<h2>Notes<\/h2>\n<p><em>I need to write more stuff here.<\/em><\/p>\n","Templating":"<h2>Command Objects<\/h2>\n<p>First of all read Erik Arvidsson's blog post about his templating engine:<\/p>\n<p><a href='http://erik.eae.net/archives/2005/05/27/01.03.26/'>http://erik.eae.net/archives/2005/05/27/01.03.26/<\/a><\/p>\n<p>MiniWeb's system extends Erik's original. In Miniweb's system all code is evaluated in the scope of a special object called the command object. The command object provides access to functions that facilitate templating (e.g. the <code>include<\/code> function). The MiniWeb command object inherits from the <a href='#File_System'>FileSystem<\/a> object. That means that when templating you have access to functions like <code>read<\/code>, <code>write<\/code>, <code>move<\/code> etc. The Command object extends the FileSystem object by adding methods like <code>include<\/code> and <code>echo<\/code>.<\/p>\n<p>There are two Command objects in use by MiniWeb:<\/p>\n<ol>\n<li>The server's <a href='#JST_Interpreter'>Interpreter<\/a> extends the Command object by providing access to the client's <a href='#Request'>Request<\/a> object<\/li>\n<li>The <a href='#/system/Terminal'>Terminal<\/a> object extends the Command object by providing a mechanism for searching the <code>/bin/<\/code> directory and executing code there<\/li>\n<\/ol>\n<p>So, the class hierarchy for MiniWeb Command objects looks like this:<\/p>\n<pre style='color:#000'>\nBase\n.FileSystem\n..Command\n...Interpreter\n...Terminal\n<\/pre>\n\n<h2>The <code>exec()<\/code> Method<\/h2>\n<p>All Command objects have an <code>exec()<\/code> method. When you call <code>exec(path)<\/code> the file identified by <code>path<\/code> is read and interpreted by the <abbr title='JavaScript Templates'>JST<\/abbr> interpreter. This is what happens when the server returns a page to the client. The page is read and evaluated using <code>exec()<\/code> and the result is returned.<\/p>\n<p>When using the terminal you can issue commands like <code>ls<\/code> (which provides a directory listing). The Terminal is a Command object so it will evaluate the contents of <code>/bin/ls<\/code> and return the result. The <code>ls<\/code> command echoes the result to the terminal window.<\/p>\n<p>You can call <code>exec()<\/code> on <em>any<\/em> file. If the file contains no <abbr>JST<\/abbr> code then <code>exec()<\/code> will simply return the contents of the file. This is <strong>important<\/strong>! Remember: <em>you can execute any file<\/em>. This can be demonstrated clearly in the terminal. Type the name of any file and it will be executed. Most files do not contain any <abbr>JST<\/abbr> code, so <code>exec()<\/code> will simply dump the contents to screen.<\/p>\n<p>When templating you can pass data around using a property of the Command object: <code>target<\/code>.<\/p>\n<p>The <code>target<\/code> property is the most important property of any Command object. <code>target<\/code> is always a string. It often contains the path of another template.<\/p>\n<p>You change the current target by calling <code>exec()<\/code> with a second parameter:<\/p>\n<pre>exec(template, target);<\/pre>\n<p>For example:<\/p>\n<p>The file <code>add-one<\/code> contains the following code:<\/p>\n<pre>\n&lt;%= parseInt(target) + 1 %&gt;\n<\/pre>\n<p>The file <code>test<\/code> contains this code:<\/p>\n<pre>&lt;% echo(exec('add-one', 55)) %&gt;<\/pre>\n<p>If you enter <code>test<\/code> in the terminal window it will return <code>56<\/code>.<\/p>\n<p>You can think of <code>exec()<\/code> as equivalent to calling a function. <code>exec(template, target)<\/code> is equivalent to calling a function called <code>template<\/code> with arguments <code>target<\/code>. Sort of. :-)<\/p>","Request":"<p>The Request object is based on the standard <a href='http://www.w3.org/TR/XMLHttpRequest/'>XMLHttpRequest<\/a> object.<\/p>\n<p>The MiniWeb request object supports the following properties and methods:<\/p>\n<h2>Properties<\/h2>\n<dl>\n<dt><code><small>object<\/small> headers<\/code><\/dt>\n<dd><p>A JavaScript object that contains the request headers (currently both request and response headers).<\/p><\/dd>\n<dt><code><small>string<\/small> method<\/code><\/dt>\n<dd><p>e.g. GET, HEAD, POST.<\/p><\/dd>\n<dt><code><small>number<\/small> readyState<\/code><\/dt>\n<dt><code><small>string<\/small> responseText<\/code><\/dt>\n<dt><code><small>number<\/small> status<\/code><\/dt>\n<dd><p>See the W3C documentation referenced above.<\/p><\/dd>\n<dt><code><small>string<\/small> url<\/code><\/dt>\n<dd><p>The requested url.<\/p><\/dd>\n<\/dl>\n<h2>Methods<\/h2>\n<dl>\n<dt><code><small>string<\/small> getResponseHeader(<i>header<\/i>)<\/code><\/dt>\n<dt><code><small>&nbsp;&nbsp;void<\/small> open(<i>method, url<\/i>)<\/code><\/dt>\n<dt><code><small>&nbsp;&nbsp;void<\/small> send(<i>data<\/i>)<\/code><\/dt>\n<dt><code><small>&nbsp;&nbsp;void<\/small> setRequestHeader(<i>header, value<\/i>)<\/code><\/dt>\n<dd><p>See the W3C documentation referenced above.<\/p><\/dd>\n<\/dl>","MiniWeb_Object":"<h2>Properties<\/h2>\n<dl>\n<dt><code><small>boolean<\/small> dirty<\/code><\/dt>\n<dd><p>A flag indicating that the MiniWeb data has changed since last saved.<\/p><\/dd>\n<dt><code><small>boolean<\/small> readOnly<\/code><\/dt>\n<dd><p>A flag indicating that the MiniWeb server has write access. You will have write access if running from your local hard disk but not if you are viewing the page over <abbr>HTTP<\/abbr>.<\/p><\/dd>\n<dt><code><small>string<\/small> version<\/code><\/dt>\n<dd><p>The version number of MiniWeb.<\/p><\/dd>\n<\/dl>\n<h2>Methods<\/h2>\n<dl>\n<dt><code><small>string<\/small> navigateTo(<i>url<\/i>)<\/code><\/dt>\n<dd><p>Navigate to the page at <i>url<\/i>. Note that <i>url<\/i> is a MiniWeb <abbr>URL<\/abbr> (the hash portion of the full <abbr>URL<\/abbr>).<\/p><\/dd>\n<dt><code><small>string<\/small> refresh()<\/code><\/dt>\n<dd><p>Refresh the page.<\/p><\/dd>\n<dt><code><small>string<\/small> reload()<\/code><\/dt>\n<dd><p>Reload the current page. Similar to <code>refresh<\/code> but data is reloaded from the server.<\/p><\/dd>\n<dt><code><small>string<\/small> resolve(<i>path1<\/i>, <i>path2<\/i>)<\/code><\/dt>\n<dd><p>Build a path from <i>path2<\/i> relative to <i>path1<\/i>.<\/p><\/dd>\n<dt><code><small>void<\/small> save([<i>path<\/i>])<\/code><\/dt>\n<dd><p>Save the current MiniWeb document to disk. If <i>path<\/i> is supplied then it is saved to that location, otherwise it is saved to the current location.<\/p><\/dd>\n<\/dl>\n<h2>Classes<\/h2>\n<dl>\n<dt><code><a href=\"#Request\">Request<\/a><\/code><\/dt>\n<dd><p>The MiniWeb equivalent of an <code>XMLHttpRequest<\/code> object.<\/p><\/dd>\n<\/dl>","default":"<p>Not much help at the moment. Remember that you can edit <a href='javascript:beginEdit()'>anything<\/a>.<p>\n<h2>Client<\/h2>\n<p>Navigate the <a href='#/'>file system<\/a> to examine and edit content.<\/p>\n<h2>Server<\/h2>\n<p>All pages are <em>template driven<\/em>. When constructing templates you may reference commands and properties unique to the <a href='#JST_Interpreter'><abbr title='JavaScript Templates'>JST<\/abbr> interpreter<\/a> which inherits from the <a href=\"#File_System\">FileSystem<\/a> object.<\/p>\n<p>Use the <a href='#/system/Terminal'>Terminal<\/a> to manage files.<\/p>\n<h2>Templating<\/h2>\n<p>Read the <a href='#Templating'>email<\/a> I sent to Brad Neuberg.<\/p>\n<h2>The MiniWeb Object<\/h2>\n<p>The <a href='#MiniWeb_Object'>MiniWeb object<\/a> has a number of public properties and methods to aid scripting.<\/p>"},"edit":"","view":"<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\"><%\n include_once('system.js');\n if (mode) target = query;\n%><html>\n<head>\n<title>MiniWeb: <%= target %><\/title>\n<style class='mw-system' type='text/css'>\n<%\n include('view.css');\n include('edit.css');\n if (isDirectory(target)) {\n  include('directory.css');\n }\n%>\n<\/style>\n<script type='text/javascript'>\n<%\n include('edit.js');\n%>\n<\/script>\n<\/head>\n<body>\n <div class='mw-header'><% include('header'); %><\/div>\n <div class='mw-content'><% include('content'); %><\/div>\n <div class='mw-footer'><% include('footer'); %><\/div>\n<\/body>\n<\/html>","content":"<% \nlevel++; // heading level\n// sanitise the current target to make a title\nvar title = target.replace(/default$/, '').replace(/\\/(\\w+\\/)*(\\w+)\\/?/, '$2').replace(/_/g, ' ');\nif (title == '/') title = String(MiniWeb);\n%>\n<h<%= level %> class='mw-edit' id='dt-<%= target %>'><%= title %><% if (!isError) include('edit-controls'); %><\/h<%= level %>>\n<div class='mw-data' id='dd-<%= target %>'>\n<%\nif (isDirectory(target)) {\n\tprocess('directory', target);\n} else if (/\\.(css|js)$/.test(target)) {\n%>\n<pre class='mw-plain'><%= escapeHTML(read(target)) %><\/pre>\n<%\n} else {\n\tinclude_once(target);\n}\n%>\n<\/div>\n<%\nlevel--;\n%>\n","header":"<ul class='mw-menu'>\n <li><a href='#/'>Home<\/a><\/li>\n <li><a href='#/blog/'>Blog<\/a><\/li>\n <li><a href='#/system/Administration'>Admin<\/a><\/li>\n <li><a href='#/system/Terminal'>Terminal<\/a><\/li>\n <li><a href='#/system/About'>About<\/a><\/li>\n <li><a href='#/system/Help/'>Help<\/a><\/li>\n <li>--------<\/li>\n <li><a href='#/notes'>notes<\/a><\/li>\n <li class='mw-save'><a id='mw-save'<%= MiniWeb.dirty ? \" class='mw-dirty'\" : '' %> href='javascript:MiniWeb.save()'>Save<\/a><\/li>\n<\/ul>\n","footer":"<p><%= MiniWeb %>, revision <%= read('About/revision') %><\/p>\n","record":"<% \nif (isDirectory(target)) {\n\tforEach (read(target), function(item, name) {\n\t\tif (!item.isDirectory && name != 'default') {\n\t\t\tprocess('content', makepath(target, name));\n\t\t}\n\t});\n}\n%>","directory":"<%\nif (isDirectory(target)) {\n%>\n<table class='mw-directory'>\n<%\n\tvar directory = read(target);\n\tif (target != '/') {\n\t\tdirectory.add('..', null);\n\t}\n\tdirectory.sort();\n\tvar total = 0;\n\tforEach (directory, function(item, name) {\n\t\tvar icon = item.isDirectory ? '[<span>dir<\/span>]' : '';\n\t\tvar href = makepath(target, name);\n\t\tvar type = item.isDirectory ? 'Directory' : 'File';\n\t\tif (item.isDirectory) href += '/';\n\t\ttotal += item.size;\n%>\n<tr class='<%= type.toLowerCase() %><%= name == '..' ? ' parent' : '' %>'>\n<td class='icon'><%= icon %><\/td>\n<td class='size'><% if (type == 'File') echo(item.size + ' bytes'); %><\/td>\n<td><a href='#<%= href %>'><%= name %><\/a><\/td>\n<td style='padding-left:4em'><span class='mw-edit-controls-inactive'><a href='#/system/view!<%= href %>'>view<\/a>\n <a href=\"javascript:delete<%= type %>('<%= href %>')\" class='delete'>delete<\/a>\n <a href='#/system/edit!<%= href %>' class='edit'>edit<\/a><\/span><\/td>\n<\/tr>\n<%\n\t});\n\techo('<tr class=\"total\"><td><\/td><td class=\"size\">' + total + ' bytes<\/td><td>--<\/td><td><\/td><\/tr>');\n%>\n<\/table>\n<%\n}\n%>","Error":{"Moved_Permanently":"<p>The new location of this resource is: <a href=\"<%= request.getResponseHeader(\"Location\") %>\"><%= request.getResponseHeader(\"Location\") %><\/a> or <a href='javascript:history.back()'>go back<\/a>.<\/p>","Not_Found":"<p class='mw-error'>The file <b><%= request.url %><\/b> could not be found.<\/p>\n<% if (isError) { %>\n<p><a href='#/system/create!<%= request.url %>'>Create this entry<\/a> or go <a href='javascript:history.back()'>back<\/a>.<\/p>\n<% } %>","Method_Not_Allowed":"<p class=\"mw-error\">The method <b><%= request.method %><\/b> is not allowed.<\/p>\n<% if (isError) { %>\n<p><a href='mailto:dean@edwards.name'>Report an error<\/a> or <a href='javascript:history.back()'>go back<\/a>.<\/p>\n<% } %>","Internal_Server_Error":"<p>Some kind of error occurred in the fake server that powers MiniWeb:<\/p>\n<% if (isError) { %>\n<blockquote><pre><%= request.error %><\/pre><\/blockquote>\n<% if (request.command) { %>\n<blockquote><pre>\n<ul>\n<li><b>top: <\/b><%= request.command.top %><\/li>\n<li><b>parent: <\/b><%= request.command.parent %><\/li>\n<li><b>self: <\/b><%= request.command.self %><\/li>\n<li><b>target: <\/b><%= request.command.target %><\/li>\n<li><b>query: <\/b><%= request.command.query %><\/li>\n<\/ul>\n<\/pre><\/blockquote>\n<% } %>\n<p><a href='mailto:dean@edwards.name'>Report this error<\/a> or <a href='javascript:history.back()'>go back<\/a>.<\/p>\n<% } %>","default":"<p><em>Status: <%= request.status %><\/em><\/p>\n<p><%= request.repsonseText %><\/p>"},"About":{"Author":"Dean Edwards","Copyright":"&copy; Dean Edwards 2007","default":"<p>MiniWeb models an entire web site in a single <abbr title=\"HyperText Markup Language\">HTML<\/abbr> page. \nAll of the site files are stored in a <abbr title=\"JavaScript Object Notation\">JSON<\/abbr> object which \nyou can navigate with a UNIX-like shell or the system browser. \nIt has a built-in templating system and has an approximate separation of client and server.<\/p>\n<p>Project home: <a href='http://base2.googlecode.com/svn/trunk/src/apps/MiniWeb/'>http://base2.googlecode.com/svn/trunk/src/apps/MiniWeb/<\/a><\/p>\n<p>Blog post: <a href='http://dean.edwards.name/weblog/2007/05/miniweb/'>http://dean.edwards.name/weblog/2007/05/miniweb/<\/a><\/p>\n<% process('/system/record', path); %>","License":"<a href='http://www.opensource.org/licenses/mit-license'>http://www.opensource.org/licenses/mit-license<\/a>","Version":"<%= MiniWeb.version %>","revision":"2348"},"Terminal":"<style class='mw-system' type='text/css'>\n<% include('terminal.css'); %>\n<\/style>\n\n<div id='form'>\n<%\nvar STATE = '#state';\nvar terminal = MiniWeb.terminal;\nvar state = terminal[STATE];\n%>\n<div id='output'><%= state.output %><\/div>\n<span id='protocol'><%= terminal.protocol %><\/span><span id='path'><%= terminal.path %><\/span>&gt;\n<input id='input' spellcheck='false' autocomplete='off'>\n<\/div>\n\n<script type='text/javascript'>\n<% include('terminal.js'); %>\n<\/script>","edit-controls":"<span class='mw-edit-controls'>\n <span class='mw-edit-controls-inactive'>\n<% if (target != '/') { %>\n  <a href=\"javascript:deleteFile('<%= target %>')\">delete<\/a>\n<% } %>\n<% if (isFile(target)) { %>\n  <a href=\"javascript:beginEdit('<%= target %>')\">edit<\/a>\n<% } %>\n <\/span>\n <span class='mw-edit-controls-active'>\n  <a href=\"javascript:applyEdit('<%= target %>')\">apply<\/a>\n  <a href='javascript:cancelEdit()'>cancel<\/a>\n <\/span>\n<\/span>","edit.css":"/* Edit Controls */\n\n.mw-edit, .mw-data {\n\tposition: relative;\n\twidth: 100%;\n}\n\n.mw-edit-controls {\n\tposition: absolute;\n\tdisplay: block;\n\tright: 0;\n\tbottom: 2px;\n\tfont-weight: normal;\n\tcolor: GrayText;\n\ttext-align: right;\n}\n\nh1 .mw-edit-controls {\n\tfont-size: medium;\n}\n\nh2 .mw-edit-controls {\n\tfont-size: small;\n}\n\nh3 .mw-edit-controls {\n\tfont-size: x-small;\n}\n\n.mw-edit-controls a {\n\ttext-decoration: underline;\n\tpadding: 0 3px 0 2px;\n\tcursor: pointer;\n}\n\n.mw-edit-controls-inactive a {\n\tcolor: #408040;\n}\n\n.mw-edit-controls-active a {\n\tcolor: #EE0000;\n}\n\n.mw-active {\n\tcolor: #800000;\n\tborder-color: #800000 !important;\n}\n\n.mw-edit-controls-active,\n.mw-active .mw-edit-controls-inactive {\n\tdisplay: none;\n}\n\n.mw-edit-controls-inactive,\n.mw-active .mw-edit-controls-active {\n\tdisplay: block;\n}\n\n.mw-editor {\n\twidth: 100%;\n\tmargin: 0;\n\tborder: 1px solid #EFE7E7;\n}\n","edit.js":"\nvar Request = MiniWeb.Request;\nvar title, content, editor;\nvar editing = false;\n\nvar $ = function(id) {\n  return document.getElementById(id);\n};\n\nwindow.onunload = function() {\n  Request = null;\n}\n\nwindow.onload = function() {\n<% if (/^(edit|create)$/.test(mode)) { %>\n  beginEdit();\n<% } %>\n}\n\nfunction applyEdit(target) {\n  PUT(target, editor.value);\n<% if (/^(edit|create)$/.test(mode)) { %>\n  MiniWeb.navigateTo(target);\n<% } else { %>\n  MiniWeb.reload();\n<% } %>\n}\n\nfunction beginEdit(target, maximise) {\n  if (editing) cancelEdit();\n  editing = true;\n  if (!target) target = '<%= target %>';\n  target = target.replace(/^.*!/, \"\");\n  title = $('dt-' + target);\n  title.className = 'mw-edit mw-active';\n  var level = parseInt(title.tagName.slice(1));\n  content = $('dd-' + target);\n  if (maximise || level == 1) {\n    var height = parent.document.body.clientHeight - content.offsetTop - 64;\n  } else {\n    height = 48;\n  }\n  editor = document.createElement('textarea');\n  editor.className = 'mw-editor';\n  editor.spellcheck = false;\n  editor.style.height = height + 'px';\n<% if (mode == 'create') { %>\n  editor.value = '';\n<% } else { %>\n  editor.value = GET(target, {'Content-Type': 'text/plain'});\n<% } %>\n  content.parentNode.insertBefore(editor, content);\n  content.style.display = 'none';\n  editor.focus();\n}\n\nfunction cancelEdit() {\n  editing = false;\n<% if (/^(edit|create)$/.test(mode)) { %>\n  history.back();\n<% } else { %>\n  title.className = 'mw-edit';\n  content.parentNode.removeChild(editor);\n  content.style.display = 'block';\n<% } %>\n}\n\nfunction deleteFile(target) {\n  if (confirm('Delete ' + target + '?')) {\n    DELETE(target);\n    if (MiniWeb.client.address == target) {\n      history.back();\n    } else {\n      MiniWeb.reload();\n    }\n  }\n}\n\nfunction deleteDirectory(name) {\n  deleteFile(name);\n}\n\nfunction GET(url, header) {\n  return new Request('GET', url, null, header).responseText;\n}\n\nfunction PUT(url, data) {\n  new Request('PUT', url, data);\n}\n\nfunction DELETE(url) {\n  new Request('DELETE', url);\n}\n","directory.css":"/* Directory View */\n\n.mw-directory {\n\tfont-family: \"Lucida Console\", monspoace; font-size: small;\n}\n\n.mw-directory .directory a.edit,\n.mw-directory .parent a.delete {\n\tvisibility: hidden;\n}\n\n.mw-directory .total td {\n\tpadding-top: 1em;\n}\n\n.mw-directory .mw-edit-controls-inactive {\n\tposition: static;\n\ttext-align: right;\n}\n\n.mw-directory .mw-edit-controls-inactive a {\n\tmargin-right: 1ex;\n}\n\n.mw-directory td {\n\tpadding-right: 1em;\n\tvertical-align: baseline;\n}\n\n.mw-directory .icon span {\n\tbackground-color: #FFFFCC;\n}\n\n.mw-directory .size {\n\tpadding-right: 2em;\n\ttext-align: right;\n}","view.css":"/* Structure */\n\nhtml {\n\tmargin: 0;\n\tpadding: 0;\n}\n\nbody {\n\tmargin: 0;\n\tpadding: 1.33em 0;\n}\n\ntd {\n\tfont-size: 1em;\n}\n\n.mw-header, .mw-footer {\n\tposition: absolute;\n\tleft: 0;\n\twidth: 100%;\n\theight: 1.33em;\n\tz-index: 999;\n}\n\n.mw-header {\n\ttop: 0;\n}\n\n.mw-footer {\n\tbottom: 0;\n}\n\n@media screen {\n\tbody > .mw-header,\n\tbody > .mw-footer {\n\t\tposition: fixed;\n\t}\n}\n\n* html body {\n\toverflow: hidden;\n} \n\n* html .mw-content {\n\theight: 100%;\n\toverflow: auto;\n}\n\n.mw-content {\n\tpadding: 0 4em 0 2em;\n\tmargin: 2em 0;\n}\n\n* html .mw-content {\n\tpadding-top: 2em;\n}\n\n/* Style */\n\nbody {\n\tfont-family: Verdana, Arial, sans-serif;\n}\n\np {\n\tline-height: 1.33em;\n\ttext-align: justify;\n}\n\ncode, pre {\n\tcolor: darkred;\n}\n\npre {\n\tbackground-color: #FCFCFC;\n\tborder: 1px solid #CCC;\n\tpadding: 1ex;\n\tmargin: 1em 2em 1em 1em;\n}\n\npre, textarea {\n\tfont-family: \"Lucida Console\", monospace;\n\tfont-size: small;\n\t_font-size: x-small;\n}\n\npre.mw-plain {\n\tcolor: black;\n\tmargin: 0;\n\tpadding: 1px;\n\tborder: none;\n\tbackground-color: transparent;\n}\n\ndt code {\n\tfont-weight: bold;\n\tcolor: #000;\n}\n\ndt small, dt i {\n\tfont-weight: normal;\n\tcolor: darkred;\n}\n\n.mw-header, .mw-footer {\n\tbackground-color: #222;\n\tcolor: #FFF;\n\tfont-size: smaller;\n}\n\n.mw-header {\n\tfont-weight: bold;\n}\n\n.mw-footer p {\n\tmargin: 0;\n\tpadding-right: 1ex;\n\ttext-align: right;\n}\n\n/* Links */\n\na {\n\tcolor: #00E;\n\tcursor: pointer;\n\ttext-decoration: underline;\n}\n\na:visited,\na[href^=\"http\"]:visited,\na[href^=\"javascript\"]:visited,\na[href^=\"mailto\"]:visited {\n\tcolor: #551A8B;\n}\n\na.mw-new {\n\tcolor: #E00;\n\ttext-decoration: none;\n}\n\na.mw-new:hover {\n\ttext-decoration: underline;\n}\n\n/* Menu */\n\n.mw-menu {\n\tmargin: 0;\n\tpadding: 0;\n}\n\n.mw-menu li {\n\tdisplay: inline;\n}\n\n.mw-menu a {\n\tcolor: #FFF !important;\n\ttext-decoration: none !important;\n\tpadding: 0 1ex;\n}\n\n.mw-menu a:hover {\n\tbackground-color: #FFFFFF !important;\n\tcolor: #222 !important;\n}\n\n.mw-save {\n\tposition: absolute;\n\ttop: 0;\n\tright: 1ex;\n}\n\n#mw-save.mw-dirty {\n\tcolor: #F00 !important;\n}\n\n/* Headings */\n\n* + html h1 {\n\tmargin: 1.67em 0 0.67em 0;\n}\n\n* html h1 {\n\tmargin: 1.67em 0 0.67em 0;\n}\n\nh1 {\n\tborder-bottom: 2px solid;\n}\n\nh2 {\n\tborder-bottom: 1px solid #808080;\n}\n\n/* Other */\n\np.mw-error b {\n\tcolor: #E00;\n}\n","terminal.js":"var ABS    = /^\\//;\nvar BIN    = '/bin/';\nvar STATE  = '#state';\nvar HIDDEN = 'valueOf';\nvar TMP    = HIDDEN;\nvar STDIN  = 0;\nvar STDOUT = 1;\n\nextend(window, \"onload\", function() {\n  this.base();\n  setFocus();\n});\n\nvar terminal = MiniWeb.terminal;\nvar state = terminal[STATE];\nvar form = $('form');\nvar input = $('input');\nvar output = $('output');\nvar path = $('path');\nvar protocol = $('protocol');\nvar saveButton = $('mw-save');\nvar textContent = output.textContent ? 'textContent' : 'innerText';\n\nfunction setFocus() {\n  var client = input.scrollParent || document.documentElement;\n  if (!base2.detect('MSIE')) client.scrollTop = client.scrollHeight;\n  input.focus();\n};\n\nfunction clean(method) {\n  var dirty = MiniWeb.dirty\n  method.apply(terminal, slice(arguments, 1));\n  MiniWeb.dirty = dirty;\n};\n\nfunction lookup(command) {\n  var path = terminal.path.split('/');\n  do {\n    path.pop();\n    var lookup = path.join('/') + '/bin/' + command;\n  } while (path.length && !terminal.exists(lookup));\n  return lookup;\n};\n\ninput.style.width = (form.offsetWidth - input.offsetLeft) + 'px';\n\ninput.onkeydown = function(event) {\n  event = event || window.event;\n  switch (event.keyCode) {\n    case 13: // return\n      var $output = [];\n      state.commands[state.position++] = input.value;\n      state.commands.length = state.position;\n      var prompt = state.protocol + terminal.path + '> ';\n      $output.push(prompt + input.value);\n      var streams = trim(input.value).split(/\\s*>\\s*/);\n      var $input = streams[STDIN].split(/\\s+/);\n      var command = $input[0];\n      if (command) {\n        var template = command;\n        var target = $input.slice(1).join(' ');\n        if (!terminal.isFile(template) && !ABS.test(template) && terminal.isFile(lookup(template))) {\n          clean(terminal.copy, lookup(template), TMP);\n          template = TMP;\n        }\n        if (terminal.isFile(template)) {\n          var result = terminal.exec(template, target);\n          clean(terminal.remove, TMP);\n          if (streams[STDOUT]) {\n            terminal.write(streams[STDOUT], result);\n          } else if (trim(result)) {\n            $output.push(result);\n          }\n        } else {\n          if (command == 'clear') {\n            output.innerHTML = '<pre>' + MiniWeb + '<\/pre><br>';\n            $output = [];\n          } else if (command == 'cd') {\n            if (terminal.isDirectory(target)) {\n              terminal.chdir(target);\n            } else {\n              $output.push('No such directory.');\n            }\n          } else {\n            $output.push('File not found: ' + command);\n          }\n        }\n        saveButton.className = MiniWeb.dirty ? 'mw-dirty' : '';\n      }\n      for (var i = 0; i < $output.length; i++) {\n        var node = document.createElement('pre');\n        node[textContent] = $output[i];\n        output.appendChild(node);\n      }\n      if (i) {\n        output.appendChild(document.createElement('br'));\n      }\n      state.output = output.innerHTML;\n      path[textContent] = terminal.path;\n      protocol[textContent] = terminal.protocol;\n      input.style.width = '0px'; // force recalc\n      input.style.width = (form.offsetWidth - input.offsetLeft) + 'px';\n      input.value = '';\n      setFocus();\n      return false;\n    case 38: // up-arrow\n      if (state.position > 0) {\n        input.value = state.commands[--state.position];\n      }\n      return false;\n    case 40: // down-arrow\n      if (state.position < state.commands.length - 1) {\n        input.value = state.commands[++state.position];\n      }\n      return false;\n  }\n};\n","terminal.css":"#form, #input, #output, pre {\n\tfont-family: \"Lucida Console\", monospace;\n\tfont-size: small;\n\t_font-size: x-small;\n\tborder-width: 0;\n\tmargin: 0;\n\tpadding: 0;\n\tbackground-color: transparent;\n\tcolor: black;\n}\n\n#input {\n\tdisplay: inline;\n\tvertical-align: bottom;\n}\n\n#output pre {\n\tmax-width: 60em;\n\t_width: 60em;\n\twhite-space: pre-wrap;\n\twhite-space: -moz-pre-wrap;\n\twhite-space: -pre-wrap;\n\twhite-space: -o-pre-wrap;\n\tword-wrap: break-word;\n\t_padding-top: 1px;\n}\n","create":"","system.js":"<% \n isError = request && request.status > 299;\n level = 0; // heading level\n mode = \"\";\n if (query && /^\\/system\\/(view|edit|create)$/.test(top)) {\n  mode = target.slice(8);\n }\n%>"}
</script>
<script type="text/javascript">
MiniWeb.$$.bin={"echo":"<%= target %>","cat":"<%\nforEach (args(), function(path, index) {\n\tif (index) echo('\\n');\n\tif (path) echo(read(path));\n});\n%>","cp":"<%\nargs('path1,path2');\nif (path1 && path2) {\n\tif (exists(path1)) {\n\t\tcopy(path1, path2);\n\t} else {\n\t\techo(path1 + ': file not found.');\n\t}\n}\n%>","mv":"<%\nargs('path1,path2');\nif (path1 && path2) {\n\tif (exists(path1)) {\n\t\tmove(path1, path2);\n\t} else {\n\t\techo(path1 + ': file not found.');\n\t}\n}\n%>","rmdir":"<%\nif (isDirectory(target)) {\n\tremove(target);\n} else if (isFile(target)) {\n\techo(target + ': is not a directory.');\n} else {\n\techo(target + ': directory not found.');\n}\n%>","rm":"<%\nif (target != self) {\n\tif (isFile(target)) {\n\t\tremove(target);\n\t} else if (isDirectory(target)) {\n\t\techo(target + ': can\\'t delete a directory. use \"rmdir\" or \"rm -r\" instead.');\n\t} else {\n\t\techo(target + ': file not found.');\n\t}\n}\n%>","ed":"<%\n// open the file in the system editor\nif (target != self) {\n\tif (isDirectory(target)) {\n\t\techo('Cannot edit a directory.');\n\t} else if (isFile(target)) {\n\t\tMiniWeb.navigateTo('/system/edit!' + makepath(target));\n\t} else {\n\t\tMiniWeb.navigateTo('/system/create!' + makepath(target));\n\t}\n}\n%>","date":"<%= new Date().toLocaleString() %>","help":"Sorry. There is not much help yet. Try using UNIX commands (mostly). Here is a quick dump of available commands. You will have to work out what they do yourself:\n\n<%= read('/bin').filter(function(item) {\n  return !item.isDirectory;\n}).join('  ') %>\n\nYou can also call 'clear' to clear the terminal and 'cd' to change directory.","mkdir":"<%\nif (isDirectory(target)) {\n\techo(target + ': is already a directory.');\n} else if (isFile(target)) {\n\techo(target + ': is already a file.');\n} else {\n\tmkdir(target);\n}\n%>","save":"<%\nif (self != target) {\n\tif (MiniWeb.save(target)) {\n\t\techo(target ? 'saved as ' + target : 'saved.');\n\t}\n}\n%>","time":"<%= new Date().toLocaleTimeString() %>","grep":"<%\nif (target != self) {\n\targs('pattern,path');\n\tif (isDirectory(path)) {\n\t\tif (!/\\/$/.test(path)) {\n\t\t\tpath += \"/\";\n\t\t}\n\t\tforEach (read(path), function(data, name) {\n\t\t\techo(exec(self, pattern + ' ' + path + name));\n\t\t});\n\t} else if (isFile(path)) {\n\t\tpattern = new RegExp(pattern);\n\t\tif (pattern.test(read(path))) {\n\t\t\techo(path + ' matches.\\n');\n\t\t}\n\t} else {\n\t\techo(path + ': no such file or directory.\\n');\n\t}\n}\n%>","ls":"<%\n// display the contents of a directory\nif (isDirectory(target)) {\n\tvar PADDING = '           ';\n\tvar files = read(target).map(function(item, name) {\n\t\tname += item.isDirectory ? '/' : '';\n\t\treturn name + PADDING.slice(name.length % PADDING.length);\n\t});\n\techo(files.sort().join(''));\n} else {\n\techo('no such directory.');\n}\n%>","manual":{"ed":"usage: ed <path>\n\nEdit the file identified by path.","echo":"usage: echo <text>\n\nWrite text to the output buffer.","date":"usage: date\n\nReturns the current date.","time":"usage: time\n\nReturns the current time."},"man":"<%\nif (isFile('/bin/manual/' + target)) {\n\techo('help for command: ' + target + '\\n\\n' + exec('/bin/manual/' + target));\n} else if (!isFile('/bin/' + target)) {\n\techo('command not found: ' + target);\n} else {\n\techo('help not found for command: ' + target);\n}\n%>"}
</script>
<script type="text/javascript">
MiniWeb.$$.examples={"Simple_Form":"<form>\n <input type='text' name='text'>\n <button type='submit'>echo<\/button>\n<\/form>\n<hr>\n<p><%= request.post.text %><\/p>\n","Calculator":"<form>\n <input type='text' name='expression'>\n <button type='submit'>evaluate<\/button>\n<\/form>\n<hr>\n<% if (request.post) { %>\n<p><%= exec('bin/calc', request.post.expression) %><\/p>\n<% } %>\n","bin":{"hello-world":"<%='Hello World!'%>","multiply":"<%\nfunction multiply(first, second) {\n  return first * second;\n};\nvar factors = args();\nvar product = reduce(factors, multiply, 1);\necho(product);\n%>","calc":"<%\nvar result = NaN;\nvar INVALID = /[^\\s\\d\\/%*.+-]/;\ntry {\n\tif (!INVALID.test(target)) {\n\t\tresult = Number(eval(target));\n\t}\n} catch (e) {\n\t// ignore\n} finally {\n\tif (isNaN(result)) {\n\t\tresult = 'invalid expression';\n\t}\n\techo(result);\n}\n%>"}}
</script>
<script type="text/javascript">
MiniWeb.$$.notes="<p>Stuff I gotta do:<\/p>\n<ul>\n <li><code>cd<\/code> is currently hard coded in <a href='#/system/terminal.js'><code>terminal.js<\/code><\/a><\/li>\n <li><del>client scripts don't need to maintain dirty state of MiniWeb<\/del><\/li>\n <li><del>simpler JST parser<\/del> simplify it further<\/li>\n <li><del>get templating working<\/del> <del>now get system inheritance working<\/del><\/li>\n <li><del>use echo() properly in Terminal<\/del><\/li>\n <li><del>../relative urls and<\/del> wild cards (*)<\/li>\n <li>Support more file systems: <ul>\n  <li><del>JSON<\/del><\/li>\n  <li>HTML<\/li>\n  <li>file://<\/li>\n  <li>Ajax<\/li>\n <\/ul><\/li>\n <li>import/export<\/li>\n <li>Preferences: <ul>\n  <li>Markdown/HTML/Plain text<\/li>\n <\/ul><\/li>\n<\/ul>"
</script>
<script type="text/javascript">
MiniWeb.$$.blog={"About":"<p>Write about yourself.<\/p>","Manage":"<p>You are invited to customise your blog:<\/p>\n<ul>\n <li>Edit blog <a href='#/data/blog/Properties/'>properties<\/a><\/li>\n <li>Edit blog <a href='#/data/blog/Preferences/'>preferences<\/a><\/li>\n <li>Edit the default <a href='#/system/edit!/blog/system/view'>view<\/a> (page structure)<\/li>\n <ul>\n  <li>Edit the <a href='#/system/edit!/blog/system/menu'>menu<\/a> template<\/li>\n  <li>Edit the <a href='#/system/edit!/blog/system/content'>content<\/a> template<\/li>\n  <li>Edit the <a href='#/system/edit!/blog/system/footer'>footer<\/a> template<\/li>\n  <li>Edit the <a href='#/system/edit!/blog/system/view.css'>style<\/a><\/li>\n <\/ul><\/li>\n <li>Edit <a href='#/system/edit!/blog/Manage'>this<\/a> page<\/li>\n<\/ul>\n<p>If you are feeling adventurous you can use the <a href='#/system/Terminal'>terminal<\/a> to modify the file system.<\/p>","Help":"<h2>How to use your blog<\/h2>\n<p>I need to write something here.<\/p>","Edit":"<% process('Write', target); %>","system":{"menu":"<ul class='menu'>\n <li class='mw-save'><a id='mw-save'<%= MiniWeb.dirty ? \" class='mw-dirty'\" : '' %> href='javascript:MiniWeb.save()'>Save<\/a><\/li>\n <li><a href='#/' title='Go to the MiniWeb start page'>/<\/a><\/li>\n <li><a href='#/blog/' title='Go to the start page of your blog'>Home<\/a><\/li>\n <li><a href='#/blog/Manage' title='Manage your blog'>Manage<\/a><\/li>\n <li><a href='#/blog/Write' title='Write a new post'>Write<\/a><\/li>\n <li><a href='#/blog/About/' title='About this blog'>About<\/a><\/li>\n<\/ul>\n","title":"<h1><%= read('/data/blog/Properties/title') %><\/h1>\n","footer":"<h3>Search<\/h3>\n<h3>Categories<\/h3>\n<h3>Archives<\/h3>","meta":"<p><%= MiniWeb %> | Revision <%= read('/system/Document/revision') %><\/p>\n","content":"<% if (target != '/blog/default') { %>\n<h2><%= target.replace(/\\/(\\w+\\/)*(\\w+)\\/?/, '$2').replace(/_/g, ' ') %><\/h2>\n<% } %>\n<div>\n<% include_once(target); %>\n<\/div>","view":"<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\">\n<html>\n<head>\n<title>MiniBlog: <%= target %><\/title>\n<%\n isError = request && request.status > 299;\n include_style('view.css');\n if (/^\\/blog\\/(Edit|Write)/.test(target)) {\n  include_style('editor.css');\n }\n%>\n<\/head>\n<body>\n <div class='title'><% include('title'); %><\/div>\n <div class='menu'><% include('menu'); %><\/div>\n <div class='content'><% include('content'); %><\/div>\n <div class='footer'><% include('footer'); %><\/div>\n <div class='meta'><% include('meta'); %><\/div>\n<\/body>\n<\/html>","view.css":"/* Structure */\n\nhtml {\n\tmargin: 0;\n\tpadding: 0;\n}\n\nbody {\n\tfont-family:\"Lucida Grande\", Verdana, Arial, Sans-Serif;\n\tmargin: 0;\n\tpadding: 2em 8em;\n\tbackground-color: #222222;\n}\n\n/* Colour */\n\ndiv.title , div.menu, div.content, div.footer, div.meta {\n\tcolor: #FFFFFF;\n\tmargin-top: 8px;\n\tpadding: 1ex 2em;\n\t-moz-border-radius: 5px;\n\tborder-radius: 5px;\n}\n\ndiv.title {\n\tbackground-color: #DD8822;\n}\n\ndiv.menu, div.meta {\n\tbackground-color: #88CC22;\n\tpadding: 2px 2em;\n\tfont-size: smaller;\n}\n\ndiv.content {\n\tbackground-color: #EEEEEE;\n\tcolor: #000000;\n}\n\ndiv.footer {\n\tbackground-color: #2288CC;\n\tfont-size: smaller;\n}\n\ndiv.footer, div.meta {\n\ttext-align: center;\n}\n\ndiv.meta p {\n\tmargin: 0;\n}\n\nh2 {\n\tborder-bottom: 2px solid;\n}\n\n/* Links */\n\na {\n\tcolor: #FFFFFF;\n\tcursor: pointer;\n\ttext-decoration: none;\n}\n\ndiv.content a {\n\tcolor: #0000EE;\n\ttext-decoration: underline;\n}\n\ndiv.content a:visited,\ndiv.content a[href^=\"http\"]:visited,\ndiv.content a[href^=\"javascript\"]:visited,\ndiv.content a[href^=\"mailto\"]:visited {\n\tcolor: #551A8B;\n}\n\na.mw-new {\n\tcolor: #EE0000;\n\ttext-decoration: none;\n}\n\na.mw-new:hover {\n\ttext-decoration: underline;\n}\n\n/* Menu */\n\nul.menu {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-weight: bold;\n\ttext-transform: uppercase;\n}\n\nul.menu li {\n\tdisplay: inline;\n\tmargin-right: 1em;\n}\n\nul.menu a {\n\ttext-decoration: none;\n\tcolor: #FFFFFF;\n}\n\nul.menu a:hover {\n\ttext-decoration: underline;\n}\n\nul.meta {\n\tfont-size: smaller;\n}\n\n.mw-save {\n\tfloat: right;\n}\n\n#mw-save.mw-dirty {\n\tcolor: #F00 !important;\n}\n","editor.css":"textarea.editor, input {border: 1px solid silver;}\ntextarea.editor {width: 100%; margin-top: 0; clear: both;}\n#title, ul.meta h3 {border-bottom: none; margin-bottom: 0;}\nul.meta h3 {font-size: 1em;}\n#title input {font: inherit; float: left; border-bottom-width: 0;}\n#title button {float: left; margin-left: 8px;}\nul.meta {list-style: none; margin: 1em 0; padding: 0;}\nul.meta li {float: left; margin-right: 2em;}\n#title {zoom: 1; font-family: \"Lucida Grande\", Verdana, Arial, Sans-Serif;}\nh2 input {font-size: 1em; font-weight: bold;}"},"Post":"<%\nif (isDirectory(target)) {\n chdir(target);\n%>\n<div class='post'>\n <h2><%= read('Title') %><\/h2>\n <%= read('Content') %>\n <ul class='meta'>\n  <li>Posted on: <%= read('Timestamp') %><\/li>\n  <li>Categories: <%= read('Categories') %><\/li>\n  <li><a href='#Edit!<%= target.replace(/^.*\\//, '') %>'>Edit this post<\/a><\/li>\n <\/ul>\n<\/div>\n<% } %>","Write":"<% if (request.post && request.post.Title) {\n if (!request.post.Slug) {\n  request.post.Slug = request.post.Title.replace(/\\s+/g, '_').replace(/!/g, \"\");\n }\n write('/data/blog/posts/' + request.post.Slug, JSON.copy(request.post));\n%>\n<p class='message'>Post saved. <a href='#/blog/'>View blog posts<\/a>.<\/p>\n<% } %>\n<form>\n<%\nvar post = {\n Slug: '',\n Title: '',\n Content: '',\n Timestamp: JSON.parse(JSON.toString(new Date)),\n Format: '',\n Categories: ''\n};\nif (query) {\n var postDir = '/data/blog/posts/' + query + '/';\n forEach (read(postDir), function(item, name) {\n  post[name] = read(postDir + name);\n });\n}\n%>\n<h2 id='title'><input name='Title' value='<%= escapeHTML(post.Title) %>'><button type='submit' value='post'>Post<\/button><\/h2>\n<script type='text/javascript'>\nvar title = document.getElementById('title');\ntitle.firstChild.style.width = (title.offsetWidth - title.lastChild.offsetWidth - 32) + 'px';\n<\/script>\n<textarea name='Content' class='editor' rows='16'><%= escapeHTML(post.Content) %><\/textarea>\n<br style='clear:both'>\n<ul class='meta'>\n <li><h3>Categories<\/h3>\n<%\n var categories = read('/data/blog/categories/');\n%>\n  <select name='Categories' size='<%= Math.min(categories.count(), 8) %>' multiple>\n<%\n forEach (categories, function(item, category) {\n%>\n   <option><%= category %><\/option>\n<%\n });\n%>\n  <\/select><\/li>\n <li><h3>Timestamp<\/h3><input name='Timestamp' value='<%= post.Timestamp %>'><\/li>\n <li><h3>Format<\/h3>\n  <select name='Format'>\n   <option>HTML<\/option>\n   <option disabled>Markdown<\/option>\n  <\/select><\/li>\n<\/ul>\n<input type='hidden' name=\"Slug\" value='<%= post.Slug%>'>\n<\/form>\n<br style='clear:both'>\n<hr>\n<br style='clear:both'>","default":"<%\nvar posts = read('/data/blog/posts/');\nvar max = Math.max(posts.count(), 8);\nvar slugs = posts.keys(0, max);\nforEach (slugs.reverse(), function(slug) {\n\tprocess(\"Post\", '/data/blog/posts/' + slug);\n})\n%>"}
</script>
<script type="text/javascript">
MiniWeb.$$.doc={"system":{"view":"<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01//EN\"><%\n include_once('system.js');\n%><html>\n<head>\n<title><%= query %><\/title>\n<%\n // CSS\n include_style('view.css');\n include_style('edit.css');\n include_style('syntax.css');\n\n // JavaScript\n include_script('view.js');\n include_script('edit.js');\n%>\n<\/head>\n<body>\n <div class='header'><% include('header'); %><\/div>\n <div class='content'><% include('content'); %><\/div>\n <div class='footer'><% include('footer'); %><\/div>\n<\/body><%\n objectID = undefined;\n currentObject = undefined;\n%><\/html>","content":"<%\nif (typeof currentObject == 'undefined') {\n if (typeof objectID == 'undefined') {\n  include_once(target);\n } else {\n  include_once('Not_Found');\n }\n} else {\n include_once('current_object');\n}\n%>","header":"<ul class='menu'><!--\n--><li><a href='#/doc/!base2'>Home<\/a><\/li><!--\n--><li>|<\/li><!--\n--><li><a href='#/system/view!/doc/system/'>Admin<\/a><\/li><!--\n--><li>|<\/li><!--\n--><li><a href='#/doc/About'>About<\/a><\/li><!--\n--><li>|<\/li><!--\n--><li class='mw-save'><a id='mw-save'<%= MiniWeb.dirty ? \" class='mw-dirty'\" : '' %> href='javascript:MiniWeb.save()'>Save<\/a><\/li><!--\n--><\/ul>\n","footer":"<p><%= MiniWeb %>, revision <%= read('/system/About/revision') %><\/p>\n","edit-controls":"<span class='edit-controls'>\n <span class='edit'>\n  [<a href=\"javascript:beginEdit('<%= target %>')\">edit<\/a>]\n <\/span>\n <span class='apply'>\n  [<a href=\"javascript:applyEdit('<%= target %>')\">apply<\/a>]\n  [<a href='javascript:cancelEdit()'>cancel<\/a>]\n <\/span>\n<\/span>","edit.css":"/* Edit Controls */\n\n.title, .data {\n\tposition: relative;\n\twidth: 100%;\n}\n\n.edit-controls {\n\tposition: absolute;\n\tdisplay: block;\n\tright: 0;\n\tbottom: 2px;\n\tfont-weight: normal;\n\tcolor: GrayText;\n\ttext-align: right;\n}\n\nh1 .edit-controls {\n\tfont-size: medium;\n}\n\nh2 .edit-controls {\n\tfont-size: small;\n}\n\nh3 .edit-controls {\n\tfont-size: x-small;\n}\n\n.edit-controls a {\n\ttext-decoration: underline;\n\tpadding: 0 3px 0 2px;\n\tcursor: pointer;\n\tcolor: #408040;\n}\n\n.active a {\n\tcolor: #EE0000;\n}\n\n.active {\n\tcolor: #800000;\n\tborder-color: #800000 !important;\n}\n\n.active .edit,\n.inactive .apply {\n\tdisplay: none;\n}\n\n.inactive .edit,\n.active .apply {\n\tdisplay: block;\n}\n\n.editor {\n\twidth: 100%;\n\tmargin: 0;\n\tborder: 1px solid #EFE7E7;\n}","edit.js":"var editing = false;\nvar content, editor, title;\n\nfunction applyEdit(target) {\n if (editor.value) {\n  doc.data.write('<%= objectID %>', target, editor.value);\n } else {\n  doc.data.remove('<%= objectID %>', target);\n }\n MiniWeb.reload();\n}\n\nfunction beginEdit(target) {\n if (editing) cancelEdit();\n editing = true;\n title = $('#dt-' + target);\n content = $('#dd-' + target);\n editor = document.createElement('textarea');\n title.className = 'title active';\n var height = Math.min(Math.max(content.offsetHeight, 120), 480);\n editor.className = 'editor';\n editor.spellcheck = false;\n editor.style.height = height + 'px';\n editor.value = doc.data.read('<%= objectID %>', target);\n content.parentNode.insertBefore(editor, content);\n content.style.display = 'none';\n editor.focus();\n}\n\nfunction cancelEdit() {\n editing = false;\n title.className = 'title inactive';\n content.parentNode.removeChild(editor);\n content.style.display = 'block';\n}","view.js":"var INHERITED = '/data/doc/Preferences/Show_Inherited';\n\nDOM.bind(document);\n\nvar Request = MiniWeb.Request;\nvar $ = bind(document.matchSingle, document);\n\nfunction GET(url, header) {\n var response = new Request('GET', url, null, header);\n return response.status == 200 ? response.responseText : '';\n}\n\nfunction PUT(url, data) {\n new Request('PUT', url, data);\n}\n\nonload = function() {\n forEach(document.matchAll('pre.base2'), function(element) {\n  var textContent = DOM.Traversal.getTextContent(element);\n  element.innerHTML = doc.colorize(textContent);\n  element.addClass('highlight javascript');\n });\n if (GET(INHERITED, {'Content-Type': 'text/plain'})) {\n  $('div.content').addClass('show-inherited');\n }\n}\n\nextend(window, \"onunload\", function() {\n this.base();\n Request = null;\n});\n\nfunction hide(target) {\n $('#dt-' + target).className = 'title hidden';\n $('#dd-' + target).style.display = \"\";\n}\n\nfunction show(target) {\n $('#dt-' + target).className = 'title visible';\n $('#dd-' + target).style.display = \"block\";\n}\n\nfunction toggleInherited(checkbox) {\n var dirty = MiniWeb.dirty;\n PUT(INHERITED, checkbox.checked ? ' checked' : '');\n MiniWeb.dirty = dirty;\n if (checkbox.checked) {\n  $('div.content').addClass('show-inherited');\n } else {\n  $('div.content').removeClass('show-inherited');\n }\n}","view.css":"/* Structure */\n\nhtml {\n\tmargin: 0;\n\tpadding: 0;\n}\n\nbody {\n\tmargin: 1ex 5em 0 3em;\n}\n\n/* Style */\n\nbody {\n\tfont-family: \"Trebuchet MS\", Verdana, Geneva, Arial, Helvetica, sans-serif;\n}\n\np {\n\tline-height: 1.2em;\n\ttext-align: justify;\n}\n\np.properties {\n\tmargin-top: 1ex;\n\ttext-align: left;\n}\n\np.nb {\n\tpadding: 1em;\n\tbackground-color: #FFC;\n\tborder: 1px solid #E6E9F9;\n\n}\n\npre {\n\tbackground-color: #FCFCFC;\n\tborder: 1px solid #CCC;\n\tpadding: 1ex;\n\tmargin: 1em 0;\n}\n\npre.source {\n\tdisplay: none;\n}\n\ncode, pre, textarea, .value {\n\tfont-family: monospace;\n\tfont-size: inherit;\n}\n\ncode {\n\tfont-weight: bold;\n}\n\npre.plain {\n\tcolor: black;\n\tmargin: 0;\n\tpadding: 1px;\n\tborder: none;\n\tbackground-color: transparent;\n}\n\n.header {\n\tfont-weight: bold;\n}\n\n.footer {\n\tborder-top: 1px solid #808080;\n\tmargin: 8em 0 1em 0;\n\tpadding-top: 1ex;\n\tfont-size: x-small;\n\tcolor: #808080;\n}\n\n.footer p {\n\tmargin: 0;\n\ttext-align: right;\n}\n\n.title .text {\n\tfont-weight: normal;\n\tfont-size: 0.5em;\n}\n\n/* Links */\n\na {\n\tcolor: #00E;\n\tcursor: pointer;\n}\n\nh1 a,\ncode a,\n.menu a,\n.properties a {\n\ttext-decoration: none;\n}\n\na:hover {\n\ttext-decoration: underline;\n}\n\na:visited,\na[href^=\"http\"]:visited,\na[href^=\"javascript\"]:visited,\na[href^=\"mailto\"]:visited {\n\tcolor: #551A8B;\n}\n\n.properties a {\n\tmargin-right: 1ex;\n}\n\na.inherited {\n\tdisplay: none;\n}\n\n.show-inherited a.inherited {\n\tdisplay: inline;\n}\n\n/* Menu */\n\n.menu {\n\tmargin: 0;\n\tpadding: 0;\n\tfont-size: smaller;\n}\n\n.menu li {\n\tdisplay: inline;\n\tmargin-right: 1ex;\n}\n\n#mw-save {\n\tpadding: 0 1ex;\n}\n\n#mw-save.mw-dirty {\n\tbackground-color: #F00 !important;\n\tcolor: #FFF !important;\n}\n\n/* Headings */\n\nh1 {\n\tborder-bottom: 2px solid;\n}\n\nh2 {\n\tfont-size: 1.33em;\n\tborder-bottom: 1px solid #CCC;\n}\n\n/* Other */\n\np.error b {\n\tcolor: #E00;\n}\n\n\n.visible .show,\n.hidden .hide {\n\tdisplay: none;\n}\n\n.hidden .show,\n.visible .hide {\n\tdisplay: block;\n}","namespaces":"<%\nif (typeof currentObject != 'undefined') {\n var namespaces = reduce(currentObject, function(namespaces, namespace, name) {\n  if (namespace instanceof Namespace && /^\\w+$/.test(name)) {\n   namespaces.push(format(\"<a href='#/doc/!%1.%2'>%2<\/a>\", objectID, name));\n  }\n  return namespaces;\n }, []).sort().join(WBR);\n if (namespaces) {\n%>\n<h2>Namespaces<\/h2>\n<p class='properties'><%= namespaces %><\/p>\n<%\n }\n}\n%>","classes":"<h2>Classes<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined') {\n echo(reduce(currentObject, function(classes, _class, name) {\n if (_class.ancestor == Base.ancestor || (Base.ancestorOf(_class) && !Module.ancestorOf(_class)) && /^\\w+$/.test(name)) {\n   classes.push(format(\"<a href='#/doc/!%1.%2'>%2<\/a>\", objectID, name));\n  }\n  return classes;\n }, []).sort().join(WBR) || 'None.');\n}\n%><\/p>","modules":"<%\nif (typeof currentObject != 'undefined') {\n var modules = reduce(currentObject, function(modules, module, name) {\n if (Module.ancestorOf(module) && /^\\w+$/.test(name)) {\n   modules.push(format(\"<a href='#/doc/!%1.%2'>%2<\/a>\", objectID, name));\n  }\n  return modules;\n }, []).sort().join(WBR);\n if (modules) {\n%>\n<h2>Modules<\/h2>\n<p class='properties'><%= modules %><\/p>\n<%\n }\n}\n%>","properties":"<h2>Properties<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined') {\n var properties = [];\n forEach (currentObject, function(property, name) {\n if (/^\\w*[a-z]\\w*$/.test(name) && !(property instanceof Function) && !(property instanceof Namespace)) {\n   properties.push(format(\"<a href='#/doc/!%1.%2'>%2<\/a>\", objectID, name));\n  }\n }, null, Object);\n echo(properties.sort().join(WBR) || 'None.');\n}\n%><\/p>","methods":"<h2>Methods<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined') {\n echo(reduce(currentObject, function(methods, method, name) {\n if (method instanceof Function && method.ancestor != Base.ancestor && !Base.ancestorOf(method) && /^\\w+$/.test(name)) {\n   methods.push(format(\"<a href='#/doc/!%1.%2'>%2<\/a>\", objectID, name));\n  }\n  return methods;\n }, []).sort().join(WBR) || 'None.');\n}\n%><\/p>","instance_methods":"<h2>Instance Methods<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined') {\n var methods = [];\n var ancestor = currentObject.ancestor.prototype;\n forEach (currentObject.prototype, function(method, name) {\n if (method instanceof Function && /^\\w+$/.test(name)) {\n   var inherited = ancestor[name] == undefined ? '' : 'inherited';\n   methods.push(format(\"<a href='#/doc/!%1::%2' class='%3'>%2<\/a>\", objectID, name, inherited));\n  }\n }, null, Object);\n echo(methods.sort().join(WBR) || 'None.');\n}\n%><\/p>","instance_properties":"<h2>Instance Properties<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined') {\n var properties = [];\n var ancestor = currentObject.ancestor.prototype;\n forEach (currentObject.prototype, function(property, name) {\n if (!(property instanceof Function) && /^\\w+$/.test(name)) {\n   var inherited = ancestor[name] == undefined ? '' : 'inherited';\n   properties.push(format(\"<a href='#/doc/!%1::%2' class='%3'>%2<\/a>\", objectID, name, inherited));\n  }\n }, null, Object);\n echo(properties.sort().join(WBR) || 'None.');\n}\n%><\/p>","constants":"<%\nif (typeof currentObject != 'undefined') {\n var constants = reduce(currentObject, function(constants, constant, name) {\n  if (/^[A-Z][A-Z\\d_$]*$/.test(name) && !(constant instanceof Function) && !(constant instanceof Namespace)) {\n   constants.push(format(\"<a href='#/doc/!%1.%2'>%2<\/a>\", objectID, name));\n  }\n  return constants;\n }, []).sort().join(WBR);\n if (constants) {\n%>\n<h2>Constants<\/h2>\n<p class='properties'><%= constants %><\/p>\n<%\n }\n}\n%>","section":"<%\nif (typeof currentObject != 'undefined') {\n var separator = /:/.test(objectID) ? '::' : /\\./.test(objectID) ? '.' : '';\n var objectName = objectID.split(/\\.|::/);\n var propertyName = objectName.pop();\n objectName = objectName.join('.');\n var sourceID = objectName + separator + propertyName;\n var object;\n try {eval('object=' + objectName)}catch(e){}\n while (object && !doc.data.exists(sourceID, target)) {\n  try {\n   if (!(object instanceof Function)) {\n    object = object.constructor;\n    objectName = object['#name'];\n    separator = '::';\n   } else {\n    objectName = object.ancestor['#name'];\n    eval('object=' + objectName);\n   }\n  } catch(e){object=null}\n  sourceID = objectName + separator + propertyName;\n }\n var inherited = objectID == sourceID ? '' : ' inherited';\n%>\n<h2 class='title inactive' id='dt-<%= target %>'><%= target %><% include('edit-controls'); %><\/h2>\n<div class='section<%= inherited %>' id='dd-<%= target %>'>\n<% include(doc.data.makepath(sourceID, target)); %>\n<\/div>\n<% } %>","title":"<%\nvar type = typeof currentObject;\nvar title = type == 'undefined' ? '' : exec('linkify', objectID);\nvar text = '';\nif ((type == 'object' || type == 'function') && currentObject) {\n if (currentObject instanceof Function) {\n  if (currentObject.ancestor == Base.ancestor || Base.ancestorOf(currentObject)) {\n   type = \"class\";\n   text = ' extends ';\n   if (Module.ancestorOf(currentObject)) {\n    type = \"module\";\n   }\n   var klass = currentObject.ancestor;\n  } else {\n   type = \"function\";\n   if (currentObject.ancestor) {\n    text = ' inherited from ';\n    text += exec('linkify', currentObject.ancestor['#name']);\n   }\n  }\n } else {\n  type = 'object'\n  text = ' instanceof ';\n  klass = currentObject.constructor;\n }\n while (klass && !klass['#name']) {\n  klass = klass.ancestor;\n }\n if (type != 'function') {\n  if (klass) {\n   text += exec('linkify', klass['#name']);\n  } else if (instanceOf(currentObject, global.Array)) {\n   text += 'Array';\n  } else if (instanceOf(currentObject, global.RegExp)) {\n   text += 'RegExp';\n  } else if (instanceOf(currentObject, global.Date)) {\n   text += 'Date';\n  } else {\n   text += 'Object';\n  }\n }\n}\n%>\n<h1 class='title'>\n<i class='text'><%= type %><\/i>\n<%= title %>\n<span class='text'><%= text %><\/span>\n<\/h1>","system.js":"<% \nWBR = detect('MSIE') ? '<wbr>' : ' ';\nobjectID = query || undefined;\ncurrentObject = undefined;\ntry {\n if (query) {\n  eval('currentObject=' + objectID.replace(/::/, '.prototype.'));\n }\n} catch (e){}\n%>","linkify":"<%\nvar LINK = '%1<a class=\"title-link\" href=\"#/doc/!%2\">%3<\/a>';\nvar href = '';\nvar link = target.replace(/(^|\\.|::)([^\\.:]+)/g, function(match, separator, name) {\n  href += match;\n  return href == objectID ? match : format(LINK, separator, href, name);\n});\necho(link);\n%>","syntax.css":"/* defaults */\n\n.highlight span {\n  display: inline !important;\n}\n\n.highlight .comment {\n  color: green;\n}\n\n.highlight .conditional {\n  background: #FFFFA0; /* pale yellow */\n}\n\n.highlight .string,\n.highlight .regexp,\n.highlight .number {\n  color: darkred;\n}\n\n.highlight .keyword {\n  color: blue;\n}\n\n.highlight .special {\n  color: red;\n}\n\n.highlight .tag {\n  color: purple;\n  font-weight: bold;\n}\n\n.highlight .attribute {\n  font-weight: bold;\n}\n\n.highlight .attribute.value {\n  color: blue;\n  font-weight: normal;\n}\n\n.highlight .entity {\n  color: orangered;\n}\n\n.highlight .processing-instruction {\n  color: orchid;\n  font-style: italic;\n}\n\n.highlight .cdata {\n  /* no styling */\n}\n\n/* (X)HTML */\n\n.html .doctype {\n  color: steelblue;\n  font-style: italic;\n}\n\n/* CSS */\n\n.css .comment {\n  color: gray;\n}\n\n.css .selector {\n  color: darkred;\n  font-weight: bold;\n}\n\n.css .at_rule {\n  color: orangered;\n}\n\n.css .property {\n  font-weight: bold;\n}\n\n.css .property.value {\n  color: blue;\n  font-weight: normal;\n}\n\n/* JavaScript */\n\n.javascript .global {\n  color: teal;\n}\n\n.javascript .base2 {\n  color: purple;\n}","Value":"<h2 class='title inactive' id='dt-Value'>Value<\/h2>\n<div class='section value' id='dd-Value'>\n<%= typeof currentObject == 'undefined' ? 'undefined' : escapeHTML(currentObject) %>\n<\/div>","module_methods":"<h2>Module Methods<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined' && Module.ancestorOf(currentObject)) {\n var ancestor = currentObject.ancestor;\n function isDelegate(method) { // for DOM.Interfaces\n  while (method && !method._delegate) {\n   method = method.ancestor;\n  }\n  return method && method._delegate;\n };\n echo(reduce(currentObject, function(methods, method, name) {\n if (method instanceof Function && (currentObject.prototype[name] || isDelegate(method)) && /^\\w+$/.test(name)) {\n   var inherited = ancestor[name] == undefined ? '' : 'inherited';\n   methods.push(format(\"<a href='#/doc/!%1.%2' class='%3'>%2<\/a>\", objectID, name, inherited));\n  }\n  return methods;\n }, []).sort().join(WBR) || 'None.');\n}\n%><\/p>","class_properties":"<%\nif (typeof currentObject != 'undefined') {\n var ancestor = currentObject.ancestor;\n var properties = reduce(currentObject, function(properties, property, name) {\n if (/^\\w*[a-z]\\w*$/.test(name) && (!(property instanceof Function) || name == 'Item')) {\n   var inherited = ancestor[name] == undefined ? '' : 'inherited';\n   properties.push(format(\"<a href='#/doc/!%1.%2' class='%3'>%2<\/a>\", objectID, name, inherited));\n  }\n  return properties;\n }, []).sort().join(WBR);\n if (properties) {\n%>\n<h2>Class Properties<\/h2>\n<p class='properties'><%= properties %><\/p>\n<%\n }\n}\n%>","class_methods":"<h2>Class Methods<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined') {\n var ancestor = currentObject.ancestor;\n echo(reduce(currentObject, function(methods, method, name) {\n if (method instanceof Function && method.ancestor != Base.ancestor && !Base.ancestorOf(method) && !/^(ancestor|init|Item)$/.test(name) && /^\\w+$/.test(name)) {\n   var inherited = ancestor[name] == undefined ? '' : 'inherited';\n   methods.push(format(\"<a href='#/doc/!%1.%2' class='%3'>%2<\/a>\", objectID, name, inherited));\n  }\n  return methods;\n }, []).sort().join(WBR) || 'None.');\n}\n%><\/p>","module_methods(class)":"<h2>Class Methods<\/h2>\n<p class='properties'><%\nif (typeof currentObject != 'undefined' && Module.ancestorOf(currentObject)) {\n function isDelegate(method) { // for DOM.Interfaces\n  while (method && !method._delegate) {\n   method = method.ancestor;\n  }\n  return method && method._delegate;\n };\n var ancestor = currentObject.ancestor;\n echo(reduce(currentObject, function(methods, method, name) {\n if (method instanceof Function && (!currentObject.prototype[name] || name == 'extend') && !/^(ancestor|init)$/.test(name) && /^\\w+$/.test(name) && !isDelegate(method)) {\n   var inherited = ancestor[name] == undefined ? '' : 'inherited';\n   methods.push(format(\"<a href='#/doc/!%1.%2' class='%3'>%2<\/a>\", objectID, name, inherited));\n  }\n  return methods;\n }, []).sort().join(WBR) || 'None.');\n}\n%><\/p>","namespace":"<%\n process('section', 'Summary');\n include('classes');\n include('modules');\n include('properties');\n include('methods');\n include('namespaces');\n process('section', 'Examples');\n process('section', 'Notes');\n%>","class":"<label style='font-size:smaller'><input name='nocache<%= Date2.now() %>' onclick='toggleInherited(this)' type='checkbox'<% include('/data/doc/Preferences/Show_Inherited')%>> Show inherited properties and methods?<\/label>\n<%\n process('section', 'Summary');\n include('instance_properties');\n include('instance_methods');\n include('constants');\n include('class_properties');\n include('class_methods');\n process('section', 'Examples');\n process('section', 'Notes');\n%>","module":"<label style='font-size:smaller'><input name='nocache<%= Date2.now() %>' onclick='toggleInherited(this)' type='checkbox'<% include('/data/doc/Preferences/Show_Inherited')%>> Show inherited properties and methods?<\/label>\n<%\n process('section', 'Summary');\n include('module_methods');\n include('class_constants');\n include('class_properties');\n include('module_methods(class)');\n process('section', 'Examples');\n process('section', 'Notes');\n%>","property":"<%\n process('section', 'Summary');\n include('Value');\n process('section', 'Examples');\n process('section', 'Notes');\n%>","function":"<%\n process('section', 'Summary');\n process('section', 'Syntax');\n include('source_code');\n process('section', 'Examples');\n process('section', 'Notes');\n%>","object":"<%\n process('section', 'Summary');\n include('constants');\n include('properties');\n include('methods');\n process('section', 'Examples');\n process('section', 'Notes');\n%>","Not_Found":"<h1>Not Found<\/h1>\n<p class='error'>The reference <b><%= query %><\/b> could not be found.<\/p>\n<p><a href='javascript:history.back()'>Go back<\/a>.<\/p>","source_code":"<h2 class='title hidden' id='dt-source_code'>Source Code\n<span class='edit-controls'>\n <span class='show'>\n  [<a href=\"javascript:show('source_code')\">show<\/a>]\n <\/span>\n <span class='hide'>\n  [<a href=\"javascript:hide('source_code')\">hide<\/a>]\n <\/span>\n<\/span>\n<\/h2>\n<pre class='base2 source' id='dd-source_code'>\n<%= escapeHTML(currentObject) %>\n<\/pre>","current_object":"<%\nif (typeof currentObject != 'undefined') {\n include('title');\n if (currentObject instanceof Namespace) {\n  include('namespace');\n } else if (currentObject instanceof Function) {\n  if (Module.ancestorOf(currentObject)) {\n   include('module');\n  } else if (currentObject.ancestor == Base.ancestor || Base.ancestorOf(currentObject)) {\n   include('class');\n  } else {\n   include('function');\n  }\n } else {\n  if (typeof currentObject == 'object') {\n   include('object');\n  } else {\n   include('property');\n  }\n }\n}\n%>"},"About":"<h1>About<\/h1>\n<p>This system completely separates code and documentation but maintains a strong link between the two. The system scans loaded JavaScript files and builds a framework for instantly annotating functions, objects, classes etc. Because the documentation is built by reading JavaScript source code it is always, at least at a basic level, up to date.<\/p>\n<p>If you edit this page on your local hard drive then you can save a copy after making changes. The documentation stays in this HTML page and the JavaScript code stays in a separate file. If you make later changes to your source code they will be reflected in this page immediately you reload it.<\/p>","default":"<h1>base2 Documentation System<\/h1>\n<p>Weclome to the base2/MiniWeb documentation system.<\/p>\n<ul>\n <li><a href='#/doc/!base2'>base2<\/a><\/li>\n <li><a href='#/doc/!base2.MiniWeb'>MiniWeb<\/a><\/li>\n<\/ul>"}
</script>
<body>
<script type="text/javascript">
MiniWeb.$$.data.doc={"Preferences":{"Show_Inherited":""},"entries":{"base2":{"assignID":{"#Examples":"<pre class='base2'>\nvar object = {};\nbase2.assignID(object);\nprint(object.base2ID); // => \"b2_12\"\n<\/pre>","#Summary":"Assign a unique identifier (<code>base2ID<\/code>) to an object."},"Enumerable":{"#Examples":"<p>Apply the Enumerable interface to a class:<\/p>\n<pre class='base2'>\nMyListClass.implement(Enumerable);\n<\/pre>\n<p>Apply the Enumerable interface to an object:<\/p>\n<pre class='base2'>\nvar obj = {a: 1, b: 2, c: 3};\nEnumerable(obj);\nfunction even(number) {\n  return number % 2 == 0;\n};\nobj.some(event); // => true\n<\/pre>","#Summary":"<p>This Enumerable module defines common methods for enumeration of a collection or array (or any other object).<\/p>"},"Module":{"#Examples":"<p>Create a module:<p>\n<pre class='base2'>\nvar Circle = Module.extend({\n  // instance AND static\n\n  getArea: function(circle) {\n    return this.PI * Math.pow(circle.radius, 2);\n  },\n\n  getCircumference: function(circle) {\n    return 2 * this.PI * circle.radius;\n  }\n}, {\n  // static only\n\n  PI: 3.14\n});\n<\/pre>\n<p>You cannot instantiate a Module:<\/p>\n<pre class='base2'>\nvar wheel = new Circle(50); // =&gt; ERROR!\n<\/pre>\n<p>Apply the <code>Circle<\/code> interface to an object instead:<\/p>\n<pre class='base2'>\nvar wheel = Circle({radius:50});\n<\/pre>\n<p>Call <code>getCircumference()<\/code> like an instance method on the object:<\/p>\n<pre class='base2'>\nprint(wheel.getCircumference()); //=&gt; 314\n<\/pre>\n<p>Call <code>getCircumference()<\/code> like a static method:<\/p>\n<pre class='base2'>\nprint(Circle.getCircumference({radius:10})); //=&gt; 62.8\nprint(Circle.getCircumference(wheel));       //=&gt; 314\n<\/pre>\n<p><code>Circle.PI<\/code> is static only:<\/p>\n<pre class='base2'>\nprint(Circle.PI); // =&gt; 3.14\nprint(wheel.PI);  // =&gt; undefined\n<\/pre>\n<p>Apply the <code>Circle<\/code> interface to another class:<\/p>\n<pre class='base2'>\nvar Wheel = CarPart.extend({\n  constructor: function(radius) {\n    this.base();\n    this.radius = radius;\n  }\n});\nWheel.implement(Circle);\n\nvar wheel = new Wheel(10);\nprint(wheel.getCircumference());       // =&gt; 62.8\nprint(Circle.getCircumference(wheel)); // =&gt; 62.8\n<\/pre>","#Summary":"<p>The <code><b>Module<\/b><\/code> class is loosely based on the Ruby class of the same name. A module is a collection of methods that act as static (class) methods. However, when a module is mixed in with another class, the module methods become instance methods of that class. For that reason, modules should only operate on one type of object.<\/p>\n<p>Create new modules by extending the Module class or another any of its subclasses.<\/p>\n<p>Modules should only define methods and constants.<\/p>\n<p>Modules cannot be instantiated.<\/p>\n<p>When a module is used as a mixin its methods are <em>late bound<\/em>. That means you only need to override the module method to affect target objects/classes. New methods are not inherited by classes that implement the module.<\/p>"},"Namespace":{"prototype":{"namespace":{"#Examples":"<%\ninclude('/doc/data/base2/namespace/#Examples');\ninclude('/doc/data/base2/DOM/namespace/#Examples');\n%>","#Notes":"<p>A namespace string is just a list of variable assignements (e.g. <code><a href='#/doc/!base2.namespace'>base2.namespace<\/a><\/code>).<\/p>","#Summary":"<p>A string representing all of the symbols that the <code>Namespace<\/code> exports. The string can be evaluated within any context to provide access to the namespace's properties. The properties can then be accessed as if they were declared locally.<\/p>\n<p>Evaluating a namespace will overwrite any symbols already defined in the current scope.<\/p>"},"imports":{"#Examples":"<p>Create the Namespace within a closure:<\/p>\n<pre class='base2'>\nnew function(_) {\n  // Create the Namespace object:\n\n  var MySpace = new Namespace(this, {\n    name:    \"MySpace\",\n    imports: \"IO\",\n    exports: \"MY_CONSTANT,MyClass\"\n  });\n\n  // Evaluate the imported namespaces:\n\n  eval(this.imports);\n\n  // Access the properties of the imported namespaces:\n\n  var file = new LocalFile(\"data.csv\");\n\n  // Publish this namespace:\n\n  eval(this.exports);\n};\n<\/pre>","#Notes":"<p>You do not need to import the core base2 Namespace. It will be imported automatically.<\/p>","#Summary":"<p>A comma delimited string that lists the names of the Namespaces that the Namespace imports.<\/p>"},"exports":{"#Summary":"<p>A comma delimited string that lists the names of the properties that the Namespace exports.<\/p>"},"name":{"#Summary":"<p>The name of the Namespace object. The object can then be referred to as <code>base2.<i>name<\/i><\/code>.<\/p>"}},"#Examples":"<p>Create a <code>Namespace<\/code> within a closure. You must use <code>new function<\/code> to create the closure.<\/p>\n<pre class='base2'>\nnew function(_) {\n  // Create the Namespace object:\n\n  var MySpace = new base2.Namespace(this, {\n    name:    \"MySpace\",\n    version: \"1.0\",\n    imports: \"Shapes\",                 // base2 is automatically imported\n    exports: \"MY_CONSTANT, MyClass\"    // symbols to export\n  });\n\n  // Evaluate the imported namespace:\n\n  eval(this.imports);\n\n  // Decalare a constant (this will be exported):\n\n  var MY_CONSTANT = 42;\n\n  // Declare a class. Because we imported the Shapes namespace there\n  // is no need to use the prefix on the Circle class:\n\n  var MyClass = Circle.extend({\n    // some code\n  });\n\n  // Publish the namespace by evaluating the exported namespace:\n\n  eval(this.exports);\n};\n\n// Access properties outside of the closure:\n\nvar theMeaningOfLife = base2.MySpace.MY_CONSTANT;\n\n// Globalise the MySpace namespace:\n\neval(base2.MySpace.namespace);\n\nprint(MY_CONSTANT);  // =&gt; 42\n<\/pre>","#Summary":"<p>The <code><b>Namespace<\/b><\/code> class provides a mechanism for bundling together classes within a closure. Other namespaces can be imported into the closure to eliminate the need for verbose namespacing.<\/p>\n<p>The <code>Namespace<\/code> object also provides a <a href='#/doc/!base2.Namespace::namespace'>convenient property<\/a> for dynamically importing namespaces.<\/p>"},"MiniWeb":{"#Examples":"<p>This documentation is a MiniWeb application. <a href='#/'>Explore<\/a> the core MiniWeb system to find out more.<\/p>","Interpreter":{"#Summary":"<p>This object gets between the <code><a href='#/doc/!base2.MiniWeb.Server'>Server<\/a><\/code> and the <code><a href='#/doc/!base2.MiniWeb.FileSystem'>FileSystem<\/a><\/code> to manage the returned content. The interpreter also provides access to a copy of the <code><a href='#/doc/!base2.MiniWeb.Request'>Request<\/a><\/code> object and its post data.<\/p>\n"},"Client":{"#Summary":"<p>The <b>Client<\/b> object wraps an &lt;iframe&gt; that contains the rendered page.<\/p>"},"History":{"#Summary":"<p>The <b>History<\/b> object is responsible for maintaining the state of the back/forward buttons of the browser.<\/p>"},"#Summary":"<p>MiniWeb models an entire web site in a single HTML page. All of the site files are stored in a JSON object which you can navigate with a UNIX-like shell or the system browser. It has a built-in templating system and has an approximate separation of client and server.<\/p>\n<p>The MiniWeb <a href='#/system/Help'>help page<\/a> has more information.<\/p>"},"namespace":{"#Examples":"<p>Evaluate the base2 namespace in the global scope:<\/p>\n<pre class='base2'>\neval(base2.namespace);\n<\/pre>\n<p>You can now access base2's properties  directly:<\/p>\n<pre class='base2'>\nvar object = new Base();\nvar hrefs = pluck(document.links, 'href');\n<\/pre>\n","#Notes":"<%-- empty --%>"},"DOM":{"namespace":{"#Examples":"<p>Evaluate the base2.DOM namespace within a closure and access its properties:<\/p>\n<pre class='base2'>\n(function() {\n  eval(base2.DOM.namespace);\n  var logo = Element.matchSingle(document.body, 'img.logo');\n  HTMLElement.addClass(logo, 'cool-border');\n})();\n<\/pre>\n"},"Document":{"#Summary":"<p class='properties'><i>Implements:<\/i>\n<a href='#/doc/!base2.DOM.DocumentSelector'>DocumentSelector<\/a>\n<a href='#/doc/!base2.DOM.DocumentEvent'>DocumentEvent<\/a>\n<a href='#/doc/!base2.DOM.EventTarget'>EventTarget<\/a><\/p>"},"Element":{"#Summary":"<p class='properties'><i>Implements:<\/i>\n<a href='#/doc/!base2.DOM.ElementSelector'>ElementSelector<\/a>\n<a href='#/doc/!base2.DOM.EventTarget'>EventTarget<\/a><\/p>"},"AbstractView":{"#Summary":"<p class='properties'><i>Implements:<\/i>\n<a href='#/doc/!base2.DOM.ViewCSS'>ViewCSS<\/a><\/p>"},"DocumentEvent":{"#Summary":"<p class='properties'><i>Implemented by:<\/i>\n<a href='#/doc/!base2.DOM.Document'>Document<\/a><\/p>","createEvent":{"#Syntax":"<pre class='base2'>\nvar event = DocumentEvent.createEvent(document, \"Events\");\n<\/pre>"}},"DocumentSelector":{"#Summary":"<p class='properties'><i>Implemented by:<\/i>\n<a href='#/doc/!base2.DOM.Document'>Document<\/a><\/p>"},"ElementSelector":{"#Summary":"<p class='properties'><i>Implemented by:<\/i>\n<a href='#/doc/!base2.DOM.Element'>Element<\/a><\/p>"},"EventTarget":{"#Summary":"<p class='properties'><i>Implemented by:<\/i> \n<a href='#/doc/!base2.DOM.Document'>Document<\/a>\n<a href='#/doc/!base2.DOM.Element'>Element<\/a><\/p>"},"ViewCSS":{"#Summary":"<p class='properties'><i>Implemented by:<\/i>\n<a href='#/doc/!base2.DOM.AbstractView'>AbstractView<\/a><\/p>"},"Binding":{"#Summary":"<p>The base Module for binding <abbr title=\"Document Object Model\">DOM<\/abbr> objects. Bindings contain additional methods that are added to DOM objects to provide W3C compatibility or other enhancements.<\/p>\n<p>Bindings represent real <abbr>DOM<\/abbr> objects not abstract interfaces.<\/p>"},"Interface":{"#Summary":"<p>An Interface contains additional methods that can be added to <abbr title='Document Object Model'>DOM<\/abbr> objects to provide W3C compatibility or other enhancements. Interfaces can represent either real or abstract <abbr>DOM<\/abbr> objects.<\/p>"},"Event":{"initEvent":{"#Syntax":"<pre class='base2'>\nvar event = DocumentEvent.createEvent(document, \"Events\");\nEvent.initEvent(event, \"custom\", true, false);\n<\/pre>"},"preventDefault":{"#Syntax":"<pre class='base2'>\nfunction handleClick(event) {\n  Event.preventDefault(event);\n};\n<\/pre>"}}},"Date2":{"now":{"#Examples":"<pre class='base2'>\nvar start = Date2.now();\nbatchProcess(job);\nprint('time elapsed: ' + Date.now() - start);\n<\/pre>","#Summary":"<p>Returns the current date in milliseconds since the epoch.<\/p>","#Syntax":"<pre class='base2'>\nvar now = Date2.now();\n<\/pre>"},"#Examples":"<p>Use the <code>Date2.parse()<\/code> method to parse an ISO date:<\/p>\n<pre class='base2'>\nvar date = Date2.parse(\"2007-07-01T11:33\");\n<\/pre>","#Summary":"<p>The <code><b>Date2<\/b><\/code> class is a \"pseudo subclass\" of the built-in JavaScript <code>Date<\/code> class. It provides additional methods on both the prototype and the constructor (as generic methods).<\/p>\n<p>You can use <code>Date2<\/code>:<\/p>\n<ul>\n<li>as a constructor to create new augmented dates<\/li>\n<li>to cast existing dates to <code>Date2<\/code> dates<\/li>\n<li>to cast the built-in <code>Date.prototype<\/code> so that <em>all<\/em> dates are <code>Date2<\/code> dates<\/li>\n<li>as a provider of generic methods<\/li>\n<\/ul>"},"RegGrp":{"#Examples":"<p>A simple HTML parser.<\/p>\n<pre class='base2'>\nvar escapeHTML = new RegGrp({\n  &#39;&quot;&#39;: &quot;&amp;quot;&quot;,\n  &quot;&amp;&quot;: &quot;&amp;amp;&quot;,\n  &quot;&#39;&quot;: &quot;&amp;#39;&quot;,\n  &quot;&lt;&quot;: &quot;&amp;lt;&quot;,\n  &quot;&gt;&quot;: &quot;&amp;gt;&quot;\n});\n\nvar html = escapeHTML.exec(textarea.value);\n<\/pre>\n<p>Turn text to upper case but ignore strings:<\/p>\n<pre class='base2'>\nvar parser = new RegGrp;\nparser.add(/([&#39;&quot;])[^\\1]*\\1/, RegGrp.IGNORE);\nparser.add(/\\w+/, String2.toUpperCase);\n\nvar COBOL = parser.exec(sourceCode);\n<\/pre>\n<p>A <code>RegGrp<\/code> object is also a <code><a href='#/doc/!base2.Collection'>Collection<\/a><\/code>, so you can merge several parsers:<\/p>\n<pre class='base2'>\nvar html_parser = xml_parser.union({\n  /* extra rules */\n});\nhtml_parser.merge(css_parser, js_parser);\n<\/pre>","#Summary":"<p>A collection of regular expressions and their associated replacement values.<\/p>","count":{"#Summary":"<p>Count the number of sub-expressions in a regular expression.<\/p>","#Syntax":"<pre class='base2'>\nvar length = RegGrp.count(regExp);\n<\/pre>"}},"Array2":{"#Examples":"<p>Use <code>Array2<\/code> as a constructor:<\/p>\n<pre class='base2'>\nvar array2 = new Array2(1, 2, 3);\nprint(array.contains(2)); // =&gt; true\n<\/pre>\n<p>Use <code>Array2<\/code> to cast an existing array:<\/p>\n<pre class='base2'>\nvar array1 = [1, 2, 3];\nprint(array1.contains(2)); // =&gt; ERROR!\nArray2(array1);\nprint(array1.contains(2)); // =&gt; true\n<\/pre>\n<p>Cast the built-in <code>Array<\/code> object:<\/p>\n<pre class='base2'>\nvar array1 = [1, 2, 3];\nprint(array1.contains(2)); // =&gt; ERROR!\nArray2(Array.prototype);\nprint(array1.contains(2)); // =&gt; true\n<\/pre>\n<p>Use <code>Array2<\/code> as a provider of generic methods:<\/p>\n<pre class='base2'>\nvar array1 = [1, 2, 3];\nprint(Array2.contain2(array1, 2)); // =&gt; true\n<\/pre>\n<p>More generic methods:<\/p>\n<pre class='base2'>\nvar args = Array2.slice(arguments, 1);\n\nvar hrefs = Array2.pluck(document.links, \"href\");\n\nArray2.forEach(document.images, hide);\n<\/pre>","#Notes":"<p>You can potentially use <code>Array2<\/code> to cast other array-like objects (e.g. <code>arguments<\/code> and <abbr title='Document Object Model'>DOM<\/abbr> collections) but I haven't tried it.","#Summary":"<p>The <code><b>Array2<\/b><\/code> class is a \"pseudo subclass\" of the built-in JavaScript <code>Array<\/code> class. It provides additional methods on both the prototype and the constructor (as generic methods).<\/p>\n<p>You can use <code>Array2<\/code>:<\/p>\n<ul>\n<li>as a constructor to create new augmented arrays<\/li>\n<li>to cast existing arrays to <code>Array2<\/code> arrays<\/li>\n<li>to cast the built-in <code>Array.prototype<\/code> so that <em>all<\/em> arrays are <code>Array2<\/code> arrays<\/li>\n<li>as a provider of generic methods, including existing <code>Array<\/code> methods<\/li>\n<\/ul>\n<p>When a built-in object is augmented, if a method already exists then it is not overwritten.<\/p>\n<p class='nb'>The instance methods shown below are platform-specific. You will only see the methods that will be created or overriden.<\/p>"},"K":{"#Examples":"<pre class='base2'>\nfunction Person(name, age) {\n  this.toString = K(name);\n  this.age = age;\n}\n<\/pre>","#Summary":"<p>Returns a function that returns the first argument passed to <code>K<\/code>.<p>"},"returns":{"#Examples":"<pre class='base2'>\nfunction Person(firstName, lastName) {\n  this.firstName = firstName;\n  this.lastName = lastName;\n  this.toString = returns(firstName + \" \" + lastName);\n};\n<\/pre>","#Summary":"<p> An alias of the function <code><a href='#/doc/!base2.K'>K<\/a><\/code>.<\/p>"},"not":{"#Examples":"<pre class='base2'>\nfunction even(number) {\n  return number % 2 == 0;\n}\nvar odd = not(even);\nprint(odd(3));  // =&gt; true\n<\/pre>","#Summary":"<p>Returns a function that negates the result of the function passed to it.<\/p>"},"Base":{"prototype":{"base":{"#Examples":"<pre class='base2'>\nvar object = new Base;\nobject.method = function() {\n  alert(\"Hello World!\");\n};\nobject.extend({\n  method: function() {\n    // call the \"super\" method\n    this.base();\n    // add some code\n    alert(\"Hello again!\");\n  }\n});\nobject.method();\n// ==> Hello World!\n// ==> Hello again!\n<\/pre>","#Summary":"<p>Call this method from within any other method to invoke that method's ancestor (overridden function).<\/p>"},"extend":{"#Examples":"<p>Extend with a key/value pair:<\/p>\n<pre class='base2'>\nvar object = new Base();\nobject.extend(\"foo\", \"bar\");\nprint(object.foo); // =&gt; \"bar\"\n<\/pre>\n<P>Extend with an object literal and use inheritance:<\/p>\n<% include('/doc/data/base2/Base/prototype/base/#Examples'); %>","#Summary":"<p>Extend an object with either a key/value pair or an object literal defining key/value pairs. Methods that are overridden are accessible through <code>this.base()<\/code>.<\/p>"}},"extend":{"#Examples":"<p>Classes are created by calling the <code>extend()<\/code> method on the <code>Base<\/code> class:<\/p>\n<pre class='base2'>\nvar Animal = Base.extend({\n  constructor: function(name) {\n    this.name = name;\n  },\n\n  name: \"\",\n\n  eat: function() {\n    this.say(\"Yum!\");\n  },\n\n  say: function(message) {\n    alert(this.name + \": \" + message);\n  }\n});\n<\/pre>\n<p>All classes created in this manner will inherit the <code>extend()<\/code> method so we can easily subclass the Animal class:<\/p>\n<pre class='base2'>\nvar Cat = Animal.extend({\n  eat: function(food) {\n    if (food instanceof Mouse) this.base();\n      else this.say(\"Yuk! I only eat mice.\");\n    }\n});\n\t\nvar Mouse = Animal.extend();\n<\/pre>","#Summary":"<p>Subclass a base2 class.<\/p>\n<p>This function takes two arguments, they should both be object literals. The first defines the instance interafce. The second defines the static (class) interface.<\/p>"},"#Examples":"<% include('/doc/data/base2/Base/extend/#Examples') %>","ancestorOf":{"#Examples":"<pre class='base2'>\nprint(Base.ancestorOf(Hash));   // =&gt; true\nprint(Hash.ancestorOf(Base));   // =&gt; false\n<\/pre>","#Summary":"<p>Is this class an ancestor of the target class?<\/p>"},"#Notes":"<p>The Base class has rugged inheritance. If you try to override a method with a method that is already in the inheritance chain then the new method will be ignored. This avoids circular references.<\/p>","#Summary":"<p>This class is the base class for inheritance. All base2 classes are subclasses of this class.<\/p>"},"format":{"#Examples":"<pre class='base2'>\nformat(\"%1 %2%3 %2a %1%3\", \"she\", \"se\", \"lls\"); // =&gt; \"she sells sea shells\"\n<\/pre>","#Notes":"<p>Only %1 - %9 supported.<\/p>","#Summary":"<p>Replace <code>%n<\/code> with <code>arguments[n]<\/code>.<\/p>"},"String2":{"#Examples":"<pre class='base2'>\nvar trimmed = String2.trim(textarea.value);\n<\/pre>\n<pre class='base2'>\nvar values = pluck(myForm.elements, \"value\");\nvar VALUES = Array2.map(values, String2.toUpperCase);\n<\/pre>","#Summary":"<p>The <code><b>String2<\/b><\/code> class is a \"pseudo subclass\" of the built-in JavaScript <code>String<\/code> class. It provides additional methods on both the prototype and the constructor (as generic methods).<\/p>\n<p>You can use <code>String2<\/code>:<\/p>\n<ul>\n<li>as a constructor to create new augmented strings<\/li>\n<li>to cast existing strings to <code>String2<\/code> strings<\/li>\n<li>to cast the built-in <code>String.prototype<\/code> so that <em>all<\/em> strings are <code>String2<\/code> strings<\/li>\n<li>as a provider of generic methods, including existing <code>String<\/code> methods<\/li>\n<\/ul>"},"global":{"#Notes":"<p>In browser environments this is the <code>window<\/code> object.<\/p>","#Summary":"<p>A reference to the global object.<\/p>"},"#Summary":"<p>The <code><b>base2<\/b><\/code> namespace is the root object of the base2 library.<\/p>","Hash":{"#Summary":"<p>The <code><b>Hash<\/b><\/code> class is <em>not<\/em> a replacement for the JavaScript <code>Object<\/code> class. Object literals are usually sufficient for most tasks. This class acts as the base class for other hash and collection classes.<\/p>\n<p>Read and write to a Hash object using the <code><a href=\"#/doc/!base2.Hash::fetch\">fetch()<\/a><\/code> and <code><a href=\"#/doc/!base2.Hash::store\">store()<\/a><\/code> methods.<\/p>\n<p>Hash implements the <code><a href=\"#/doc/!base2.Enumerable\">Enumerable<\/a><\/code> module for flexible iteration.<\/p>","prototype":{"store":{"#Summary":"<p>Store a value by key.<\/p>","#Syntax":"<pre class='base2'>\nhash.store(\"theKey\", theValue);\n<\/pre>"}}},"Collection":{"#Summary":"<p>A <code><b>Collection<\/b><\/code> is a <code><a href='#/doc/!base2.Hash'>Hash<\/a><\/code> that is more array-like.<\/p>\n<p>The <code><a href=\"#/doc/!base2.Collection::add\">add()<\/a><\/code> method differs from <code><a href=\"#/doc/!base2.Collection::store\">store()<\/a><\/code> in that it will throw an error if a duplicate is added (<code>store()<\/code> overwrites the previous entry).<\/p>","prototype":{"count":{"#Summary":"<p>Returns the number of items in the Collection.<\/p>"},"fetchAt":{"#Summary":"<p>Retrieves an item from a Collection by its index.<\/p>"},"item":{"#Summary":"<p>An alias of <code><a href='#/doc/!base2.Collection::fetchAt'>fetchAt()<\/a><\/code>.<\/p>"}},"Item":{"#Summary":"<p>Collection classes have a special (optional) property: <code><b>Item<\/b><\/code>. The <code>Item<\/code> property points to a constructor function. Members of the collection must be an instance of <code>Item<\/code>.<\/p>"}},"Abstract":{"#Summary":"<p>The <code><b>Abstract<\/b><\/code> class defines no methods or properties and merely acts as the base class for other abstract classes (e.g. <code><a href=\"#/doc/!base2.Module\">Module<\/a><\/code>).<\/p>\n<p>An abstract class cannot be instantiated.<\/p>"},"addName":{},"doc":{"#Summary":"<p>The application that is generating this documentation.<\/p>","Colorizer":{"#Summary":"<p>A syntax highligher.<\/p>"}},"False":{"#Summary":"<p>Returns <code>false<\/code>.<p>"},"Null":{"#Summary":"<p>Returns <code>Null<\/code>.<p>"},"True":{"#Summary":"<p>Returns <code>true<\/code>.<p>"},"Undefined":{"#Summary":"<p>Returns <code>undefined<\/code>.<p>"},"I":{"#Summary":"<p>Returns the first argument passed to it.<p>"},"JST":{"#Summary":"<p>JavaScript Templates.<\/p>"},"JSON":{"copy":{"#Summary":"<p>Use JSON to make a deep copy of an object.<\/p>\n<p>The object is converted to a JSON object and then reparsed to create a full copy.<\/p>","#Syntax":"<pre class='base2'>\nvar copy = JSON.copy(object);\n<\/pre>"},"#Summary":"<p>JavaScript Object Notation.<\/p>"},"instanceOf":{"#Summary":"<p>Handle exceptions where the target object originates from another frame.\nThis is handy for JSON parsing (amongst other things).<\/p>"},"match":{"#Summary":"<p>Same as <code>String.match()<\/code> except that this function will return an empty array if there is no match.<\/p>"},"JSB":{"#Summary":"<p>JavaScript Bindings/Behaviors.<\/p>","RuleList":{"Item":{"#Summary":"<p>The <code>RuleList.Item<\/code> class is identical to the <code><a href='#/doc/!base2.JSB.Rule'>Rule<\/a><\/code> class.<\/p>"},"#Summary":"A collection of <code><a href='#/doc/!base2.JSB.Rule'>Rule<\/a><\/code> objects.<\/p>"}},"IO":{"#Summary":"<p>A collection of classes to deal with I/O. Currently supports the local file system  and JSON.<\/p>","FileSystem":{"#Summary":"<p>An abstract class to derive other file system classes from.<\/p>"},"JSONFileSystem":{"#Summary":"<p>Manage JSON data as if it were a file system.<\/p>","#Examples":"<p>Create some JSON data:<\/p>\n<pre class='base2'>\nvar data = {\n  dir1:  {\n    file1: \"text\",\n    file2: \"more text\"\n  },\n  dir2:  {\n    file3: \"text\",\n    file4: \"more text\"\n  }\n};\n<\/pre>\n<p>Create the JSON file system:<\/p>\n<pre class='base2'>\nvar fs = new JSONFileSystem(data);\n<\/pre>\n<p>Use file system commands to navigate and manipulate the JSON data:<\/p>\n<pre class='base2'>\nfs.copy(\"dir1\", \"dir3\");\nfs.chdir(\"dir3\");\nfs.write(\"file2\", \"Boo!\");\nfs.read(\"/dir3/file2\"); //=&gt; Boo!\n<\/pre>"},"LocalFileSystem":{"#Notes":"<p>Local file system support is pretty complete for Microsoft and Mozilla platforms. Implementations for Java platforms are not so complete.<\/p>","#Summary":"<p>Manage the local file system.<\/p>"}},"trim":{"#Summary":"<p>Trim leading and trailing spaces from a string.<\/p>"},"bind":{"#Syntax":"<pre class='base2'>\nvar method = bind(fn, object);\n<\/pre>","#Summary":"<p>Bind a function to an object. The <code>this<\/code> keyword will always refer to the object you pass to the <code>bind()<\/code> function.<\/p>"},"rescape":{"#Summary":"<p>Make a string safe for conversion to a <code>RegExp<\/code>.<\/p>","#Syntax":"<pre class='base2'>\nvar safeString = rescape(string);\n<\/pre>"}}}}
</script>
<script type="text/javascript">
MiniWeb.$$.data.blog={"posts":{"Welcome":{"Title":"Welcome!","Content":"<p>Welcome to MiniBlog!<\/p>\n<p>This blog is a sample MiniWeb application. It has its own look and feel separate from the MiniWeb core. The posting mechanism is a simple <abbr>HTML<\/abbr> form.<\/p>","Categories":"","Timestamp":"2006-12-03T04:18:32","Format":"HTML","Slug":"Welcome"},"Expand_This_Blog":{"Title":"Expand This Blog!","Content":"<p>The MiniWeb blog application is only partially complete. Do you want to finish it? The following features are incomplete:<\/p>\n<ul>\n<li>blog categories<\/li>\n<li>search<\/li>\n<li>better navigation (archives)<\/li>\n<li>a better theme!<\/li>\n<\/ul>\n<p>Send your improved MiniBlog to <a href='mailto:dean@edwards.name'>dean@edwards.name<\/a>.<\/p>","Categories":"","Timestamp":"2007-04-26T20:35:41","Format":"HTML","Slug":"Expand_This_Blog"}},"Preferences":{},"Properties":{"Author":"[ your name goes here ]","Copyright":"&copy; [ copyright info goes here ]","title":"A Sample MiniBlog","default":"<% process('/system/record', path); %>"},"categories":{"General":"","JavaScript":"","Base":""}}
</script>
