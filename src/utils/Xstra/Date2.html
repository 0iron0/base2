<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Date2 tests</title>
	<style type="text/css" media="screen">
.error { color: red;}
.ok { color: green;}
.info { color: blue;}
	</style>
	<script src="http://base2.googlecode.com/svn/trunk/lib/src/base2.js" type="text/javascript" charset="utf-8"></script>
  <script src="tester.js" type="text/javascript" charset="utf-8"></script>
  <script src="Date2.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
var tests = {};
tests.testPad = function() {
  //pad2
  assertEqual( pad2(0), "00", "pad2()");
  assertEqual( pad2(1), "01", "pad2()");
  assertEqual( pad2(10), "10", "pad2()");
  assertEqual( pad2(123), "123", "pad2()");
  //pad3
  assertEqual( pad3(0), "000", "pad2()");
  assertEqual( pad3(1), "001", "pad3()");
  assertEqual( pad3(10), "010", "pad3()");
  assertEqual( pad3(11), "011", "pad2()");
  assertEqual( pad3(99), "099", "pad3()");
  assertEqual( pad3(100), "100", "pad3()");
  assertEqual( pad3(999), "999", "pad3()");
  assertEqual( pad3(1234), "1234", "pad3()");
};
tests.testToISO = function() {
  var date = Date2(new Date(0));
  date.setUTCFullYear(1972, 11-1, 14)
  assertEqual(date.toISO(), "1972-11-14", "yyyy-MM-dd format");
  date.setUTCHours(5)
  assertEqual(date.toISO(), "1972-11-14T05Z", "yyyy-MM-ddThhZ format");
  date.setUTCMinutes(12)
  assertEqual(date.toISO(), "1972-11-14T05:12Z", "yyyy-MM-ddThh:mmZ format");
  date.setUTCSeconds(59)
  assertEqual(date.toISO(), "1972-11-14T05:12:59Z", "yyyy-MM-ddThh:mm:ssZ format");
  date.setUTCMilliseconds(1)
  assertEqual(date.toISO(), "1972-11-14T05:12:59.001Z", "yyyy-MM-ddThh:mm:ss:milZ format");
  date.setUTCMilliseconds(12)
  assertEqual(date.toISO(), "1972-11-14T05:12:59.012Z", "yyyy-MM-ddThh:mm:ss:milZ format");
  date.setUTCMilliseconds(999)
  assertEqual(date.toISO(), "1972-11-14T05:12:59.999Z", "yyyy-MM-ddThh:mm:ss:milZ format");
};
tests.testParse = function() {
  var d=new Date(Date2.parse("1972-11-14"));
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-dd format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-dd format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-dd format; date");
  d=new Date(Date2.parse("1972-11-14T05Z"));
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-ddThhZ format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-ddThhZ format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-ddThhZ format; date");
  assertEqual(d.getUTCHours(), 5, "yyyy-MM-ddThhZ format; hour");
  d=new Date(Date2.parse("1972-11-14T05:12Z"));
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-ddThh:mmZ format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-ddThh:mmZ format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-ddThh:mmZ format; date");
  assertEqual(d.getUTCHours(), 5, "yyyy-MM-ddThh:mmZ format; hour");
  assertEqual(d.getUTCMinutes(), 12, "yyyy-MM-ddThh:mmZ format; minutes");
  d=new Date(Date2.parse("1972-11-14T05:12:59Z"));
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-ddThh:mm:ssZ format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-ddThh:mm:ssZ format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-ddThh:mm:ssZ format; date");
  assertEqual(d.getUTCHours(), 5, "yyyy-MM-ddThh:mm:ssZ format; hour");
  assertEqual(d.getUTCMinutes(), 12, "yyyy-MM-ddThh:mm:ssZ format; minutes");
  assertEqual(d.getUTCSeconds(), 59, "yyyy-MM-ddThh:mm:ssZ format; seconds");
  d=new Date(Date2.parse("1972-11-14T05:12:59.012Z"));
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-ddThh:mm:ss.milZ format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-ddThh:mm:ss.milZ format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-ddThh:mm:ss.milZ format; date");
  assertEqual(d.getUTCHours(), 5, "yyyy-MM-ddThh:mm:ss.milZ format; hour");
  assertEqual(d.getUTCMinutes(), 12, "yyyy-MM-ddThh:mm:ss.milZ format; minutes");
  assertEqual(d.getUTCSeconds(), 59, "yyyy-MM-ddThh:mm:ss.milZ format; seconds");
  assertEqual(d.getUTCMilliseconds(), 12, "yyyy-MM-ddThh:mm:ss.milZ format; milliseconds");
  d=new Date(Date2.parse("1972-11-14T05:12:59.01299Z")); //4-digit partial seconds
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-ddThh:mm:ss.milZ format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-ddThh:mm:ss.milZ format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-ddThh:mm:ss.milZ format; date");
  assertEqual(d.getUTCHours(), 5, "yyyy-MM-ddThh:mm:ss.milZ format; hour");
  assertEqual(d.getUTCMinutes(), 12, "yyyy-MM-ddThh:mm:ss.milZ format; minutes");
  assertEqual(d.getUTCSeconds(), 59, "yyyy-MM-ddThh:mm:ss.milZ format; seconds");
  assertEqual(d.getUTCMilliseconds(), 13, "yyyy-MM-ddThh:mm:ss.milZ format; milliseconds");
  // Test timezone offsets
  d=new Date(Date2.parse("1972-11-14T05:12:59.012+00:00"));
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-ddThh:mm:ss.mil+00:00 format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-ddThh:mm:ss.mil+00:00 format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-ddThh:mm:ss.mil+00:00 format; date");
  assertEqual(d.getUTCHours(), 5, "yyyy-MM-ddThh:mm:ss.mil+00:00 format; hour");
  assertEqual(d.getUTCMinutes(), 12, "yyyy-MM-ddThh:mm:ss.mil+00:00 format; minutes");
  assertEqual(d.getUTCSeconds(), 59, "yyyy-MM-ddThh:mm:ss.mil+00:00 format; seconds");
  assertEqual(d.getUTCMilliseconds(), 12, "yyyy-MM-ddThh:mm:ss.mil+00:00 format; milliseconds");
  d=new Date(Date2.parse("1972-11-14T05:12:59.012-01:30"));
  assertEqual(d.getUTCFullYear(), 1972, "yyyy-MM-ddThh:mm:ss.mil-01:30 format; year");
  assertEqual(d.getUTCMonth(), 11-1, "yyyy-MM-ddThh:mm:ss.mil-01:30 format; month");
  assertEqual(d.getUTCDate(), 14, "yyyy-MM-ddThh:mm:ss.mil-01:30 format; date");
  assertEqual(d.getUTCHours(), 3, "yyyy-MM-ddThh:mm:ss.mil-01:30 format; hour");
  assertEqual(d.getUTCMinutes(), 42, "yyyy-MM-ddThh:mm:ss.mil-01:30 format; minutes");
  assertEqual(d.getUTCSeconds(), 59, "yyyy-MM-ddThh:mm:ss.mil-01:30 format; seconds");
  assertEqual(d.getUTCMilliseconds(), 12, "yyyy-MM-ddThh:mm:ss.mil-01:30 format; milliseconds");
  // Test delegate parsing to Date.parse
  var d=new Date(Date2.parse("Aug 9, 1995"));
  assertEqual(d.getFullYear(), 1995, "Mmm dd, yyyy format; year");
  assertEqual(d.getMonth(), 8-1, "Mmm dd, yyyydd format; month");
  assertEqual(d.getDate(), 9, "Mmm dd, yyyy format; date");
};
window.onload=function() {
  runTests(tests);
}
  </script>
</head>
<body>
  <h1>Date2 tests</h1>
  <p>
    <input type="button" value="rerun" onclick="clearLog();runTests(tests);" title="So you can run the debugger">
  </p>
  <ul id="log">
  </ul>
</body>
</html>
